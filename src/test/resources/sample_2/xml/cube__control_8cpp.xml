<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.4">
  <compounddef id="cube__control_8cpp" kind="file">
    <compoundname>cube_control.cpp</compoundname>
    <includes local="yes">allheaders.h</includes>
    <includes refid="cube__object_8h" local="yes">cube_object.h</includes>
    <includes refid="cube__reco__context_8h" local="yes">cube_reco_context.h</includes>
    <includes refid="tesseractclass_8h" local="yes">tesseractclass.h</includes>
    <includes refid="tesseract__cube__combiner_8h" local="yes">tesseract_cube_combiner.h</includes>
    <incdepgraph>
      <node id="913">
        <label>matchtab.h</label>
        <link refid="matchtab_8h"/>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="875" relation="include">
        </childnode>
      </node>
      <node id="766">
        <label>ccmain/cube_control.cpp</label>
        <link refid="cube_control.cpp"/>
        <childnode refid="767" relation="include">
        </childnode>
        <childnode refid="768" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
        <childnode refid="865" relation="include">
        </childnode>
        <childnode refid="918" relation="include">
        </childnode>
      </node>
      <node id="856">
        <label>cutil_class.h</label>
        <link refid="cutil__class_8h"/>
        <childnode refid="857" relation="include">
        </childnode>
        <childnode refid="790" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
      </node>
      <node id="884">
        <label>docqual.h</label>
        <link refid="docqual_8h"/>
        <childnode refid="866" relation="include">
        </childnode>
        <childnode refid="837" relation="include">
        </childnode>
      </node>
      <node id="853">
        <label>image.h</label>
        <link refid="image_8h"/>
      </node>
      <node id="864">
        <label>tess_lang_mod_edge.h</label>
        <link refid="tess__lang__mod__edge_8h"/>
        <childnode refid="833" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
        <childnode refid="809" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
        <childnode refid="789" relation="include">
        </childnode>
      </node>
      <node id="892">
        <label>wordrec.h</label>
        <link refid="wordrec_8h"/>
        <childnode refid="893" relation="include">
        </childnode>
        <childnode refid="895" relation="include">
        </childnode>
        <childnode refid="827" relation="include">
        </childnode>
        <childnode refid="911" relation="include">
        </childnode>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="894" relation="include">
        </childnode>
        <childnode refid="913" relation="include">
        </childnode>
        <childnode refid="912" relation="include">
        </childnode>
        <childnode refid="914" relation="include">
        </childnode>
        <childnode refid="881" relation="include">
        </childnode>
        <childnode refid="861" relation="include">
        </childnode>
        <childnode refid="915" relation="include">
        </childnode>
        <childnode refid="917" relation="include">
        </childnode>
      </node>
      <node id="812">
        <label>cube_reco_context.h</label>
        <link refid="cube__reco__context_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="813" relation="include">
        </childnode>
        <childnode refid="816" relation="include">
        </childnode>
        <childnode refid="818" relation="include">
        </childnode>
        <childnode refid="819" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
        <childnode refid="820" relation="include">
        </childnode>
        <childnode refid="821" relation="include">
        </childnode>
        <childnode refid="822" relation="include">
        </childnode>
      </node>
      <node id="890">
        <label>blobbox.h</label>
        <link refid="blobbox_8h"/>
        <childnode refid="836" relation="include">
        </childnode>
        <childnode refid="840" relation="include">
        </childnode>
        <childnode refid="838" relation="include">
        </childnode>
        <childnode refid="867" relation="include">
        </childnode>
        <childnode refid="873" relation="include">
        </childnode>
      </node>
      <node id="861">
        <label>states.h</label>
        <link refid="states_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
      </node>
      <node id="835">
        <label>assert.h</label>
      </node>
      <node id="865">
        <label>tesseractclass.h</label>
        <link refid="tesseractclass_8h"/>
        <childnode refid="767" relation="include">
        </childnode>
        <childnode refid="866" relation="include">
        </childnode>
        <childnode refid="884" relation="include">
        </childnode>
        <childnode refid="885" relation="include">
        </childnode>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="886" relation="include">
        </childnode>
        <childnode refid="888" relation="include">
        </childnode>
        <childnode refid="892" relation="include">
        </childnode>
      </node>
      <node id="895">
        <label>classify.h</label>
        <link refid="classify_8h"/>
        <childnode refid="896" relation="include">
        </childnode>
        <childnode refid="889" relation="include">
        </childnode>
        <childnode refid="895" relation="include">
        </childnode>
        <childnode refid="827" relation="include">
        </childnode>
        <childnode refid="905" relation="include">
        </childnode>
        <childnode refid="907" relation="include">
        </childnode>
        <childnode refid="908" relation="include">
        </childnode>
        <childnode refid="909" relation="include">
        </childnode>
        <childnode refid="878" relation="include">
        </childnode>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="906" relation="include">
        </childnode>
        <childnode refid="904" relation="include">
        </childnode>
      </node>
      <node id="799">
        <label>ndminx.h</label>
        <link refid="ndminx_8h"/>
      </node>
      <node id="880">
        <label>rejctmap.h</label>
        <link refid="rejctmap_8h"/>
        <childnode refid="770" relation="include">
        </childnode>
        <childnode refid="839" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="837" relation="include">
        </childnode>
      </node>
      <node id="873">
        <label>statistc.h</label>
        <link refid="statistc_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="849" relation="include">
        </childnode>
      </node>
      <node id="790">
        <label>const.h</label>
        <link refid="const_8h"/>
      </node>
      <node id="885">
        <label>devanagari_processing.h</label>
        <link refid="devanagari__processing_8h"/>
        <childnode refid="867" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
      </node>
      <node id="776">
        <label>stdlib.h</label>
      </node>
      <node id="816">
        <label>lang_model.h</label>
        <link refid="lang__model_8h"/>
        <childnode refid="809" relation="include">
        </childnode>
        <childnode refid="817" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
        <childnode refid="811" relation="include">
        </childnode>
      </node>
      <node id="773">
        <label>platform.h</label>
        <link refid="platform_8h"/>
        <childnode refid="774" relation="include">
        </childnode>
      </node>
      <node id="903">
        <label>bitvec.h</label>
        <link refid="bitvec_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
      </node>
      <node id="914">
        <label>gradechop.h</label>
        <link refid="gradechop_8h"/>
        <childnode refid="881" relation="include">
        </childnode>
        <childnode refid="799" relation="include">
        </childnode>
      </node>
      <node id="814">
        <label>neuron.h</label>
        <link refid="neuron_8h"/>
        <childnode refid="788" relation="include">
        </childnode>
        <childnode refid="785" relation="include">
        </childnode>
      </node>
      <node id="918">
        <label>tesseract_cube_combiner.h</label>
        <link refid="tesseract__cube__combiner_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="785" relation="include">
        </childnode>
        <childnode refid="874" relation="include">
        </childnode>
      </node>
      <node id="886">
        <label>ocrclass.h</label>
        <link refid="ocrclass_8h"/>
        <childnode refid="887" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
      </node>
      <node id="841">
        <label>blckerr.h</label>
        <link refid="blckerr_8h"/>
        <childnode refid="797" relation="include">
        </childnode>
      </node>
      <node id="857">
        <label>ccutil.h</label>
        <link refid="ccutil_8h"/>
        <childnode refid="828" relation="include">
        </childnode>
        <childnode refid="797" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
        <childnode refid="792" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
        <childnode refid="858" relation="include">
        </childnode>
        <childnode refid="859" relation="include">
        </childnode>
      </node>
      <node id="767">
        <label>allheaders.h</label>
      </node>
      <node id="849">
        <label>scrollview.h</label>
        <link refid="scrollview_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
      </node>
      <node id="813">
        <label>neural_net.h</label>
        <link refid="neural__net_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="785" relation="include">
        </childnode>
        <childnode refid="814" relation="include">
        </childnode>
        <childnode refid="815" relation="include">
        </childnode>
      </node>
      <node id="830">
        <label>serialis.h</label>
        <link refid="serialis_8h"/>
        <childnode refid="776" relation="include">
        </childnode>
        <childnode refid="783" relation="include">
        </childnode>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="770" relation="include">
        </childnode>
        <childnode refid="797" relation="include">
        </childnode>
        <childnode refid="831" relation="include">
        </childnode>
      </node>
      <node id="883">
        <label>tessarray.h</label>
        <link refid="tessarray_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
      </node>
      <node id="778">
        <label>string</label>
      </node>
      <node id="836">
        <label>clst.h</label>
        <link refid="clst_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="830" relation="include">
        </childnode>
        <childnode refid="832" relation="include">
        </childnode>
      </node>
      <node id="901">
        <label>baseline.h</label>
        <link refid="baseline_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="875" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
      </node>
      <node id="889">
        <label>ccstruct.h</label>
        <link refid="ccstruct_8h"/>
        <childnode refid="855" relation="include">
        </childnode>
        <childnode refid="853" relation="include">
        </childnode>
      </node>
      <node id="825">
        <label>conv_net_classifier.h</label>
        <link refid="conv__net__classifier_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="775" relation="include">
        </childnode>
        <childnode refid="817" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
        <childnode refid="819" relation="include">
        </childnode>
        <childnode refid="818" relation="include">
        </childnode>
        <childnode refid="813" relation="include">
        </childnode>
        <childnode refid="816" relation="include">
        </childnode>
        <childnode refid="811" relation="include">
        </childnode>
      </node>
      <node id="842">
        <label>stepblob.h</label>
        <link refid="stepblob_8h"/>
        <childnode refid="843" relation="include">
        </childnode>
        <childnode refid="848" relation="include">
        </childnode>
      </node>
      <node id="862">
        <label>trie.h</label>
        <link refid="trie_8h"/>
        <childnode refid="833" relation="include">
        </childnode>
        <childnode refid="855" relation="include">
        </childnode>
        <childnode refid="795" relation="include">
        </childnode>
      </node>
      <node id="834">
        <label>ratngs.h</label>
        <link refid="ratngs_8h"/>
        <childnode refid="835" relation="include">
        </childnode>
        <childnode refid="836" relation="include">
        </childnode>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="837" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
        <childnode refid="838" relation="include">
        </childnode>
      </node>
      <node id="808">
        <label>search_node.h</label>
        <link refid="search__node_8h"/>
        <childnode refid="809" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
      </node>
      <node id="771">
        <label>stddef.h</label>
      </node>
      <node id="803">
        <label>memory.h</label>
      </node>
      <node id="910">
        <label>cutoffs.h</label>
        <link refid="cutoffs_8h"/>
        <childnode refid="898" relation="include">
        </childnode>
      </node>
      <node id="819">
        <label>feature_base.h</label>
        <link refid="feature__base_8h"/>
        <childnode refid="775" relation="include">
        </childnode>
        <childnode refid="811" relation="include">
        </childnode>
      </node>
      <node id="811">
        <label>tuning_params.h</label>
        <link refid="tuning__params_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
      </node>
      <node id="900">
        <label>fpoint.h</label>
        <link refid="fpoint_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="788" relation="include">
        </childnode>
      </node>
      <node id="917">
        <label>callcpp.h</label>
        <link refid="callcpp_8h"/>
        <childnode refid="835" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
      </node>
      <node id="786">
        <label>word_altlist.h</label>
        <link refid="word__altlist_8h"/>
        <childnode refid="787" relation="include">
        </childnode>
      </node>
      <node id="797">
        <label>errcode.h</label>
        <link refid="errcode_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
      </node>
      <node id="898">
        <label>matchdefs.h</label>
        <link refid="matchdefs_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
      </node>
      <node id="871">
        <label>polyblk.h</label>
        <link refid="polyblk_8h"/>
        <childnode refid="869" relation="include">
        </childnode>
        <childnode refid="829" relation="include">
        </childnode>
        <childnode refid="845" relation="include">
        </childnode>
        <childnode refid="848" relation="include">
        </childnode>
        <childnode refid="849" relation="include">
        </childnode>
        <childnode refid="872" relation="include">
        </childnode>
      </node>
      <node id="821">
        <label>char_bigrams.h</label>
        <link refid="char__bigrams_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
      </node>
      <node id="818">
        <label>classifier_base.h</label>
        <link refid="classifier__base_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="775" relation="include">
        </childnode>
        <childnode refid="817" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
        <childnode refid="819" relation="include">
        </childnode>
        <childnode refid="816" relation="include">
        </childnode>
        <childnode refid="811" relation="include">
        </childnode>
      </node>
      <node id="774">
        <label>limits.h</label>
      </node>
      <node id="916">
        <label>chop.h</label>
        <link refid="chop_8h"/>
        <childnode refid="912" relation="include">
        </childnode>
        <childnode refid="881" relation="include">
        </childnode>
      </node>
      <node id="908">
        <label>intfx.h</label>
        <link refid="intfx_8h"/>
        <childnode refid="875" relation="include">
        </childnode>
        <childnode refid="897" relation="include">
        </childnode>
        <childnode refid="878" relation="include">
        </childnode>
        <childnode refid="788" relation="include">
        </childnode>
      </node>
      <node id="893">
        <label>associate.h</label>
        <link refid="associate_8h"/>
        <childnode refid="875" relation="include">
        </childnode>
        <childnode refid="829" relation="include">
        </childnode>
        <childnode refid="894" relation="include">
        </childnode>
        <childnode refid="881" relation="include">
        </childnode>
        <childnode refid="882" relation="include">
        </childnode>
        <childnode refid="861" relation="include">
        </childnode>
      </node>
      <node id="879">
        <label>params_training_featdef.h</label>
        <link refid="params__training__featdef_8h"/>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
      </node>
      <node id="827">
        <label>dict.h</label>
        <link refid="dict_8h"/>
        <childnode refid="828" relation="include">
        </childnode>
        <childnode refid="833" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="853" relation="include">
        </childnode>
        <childnode refid="854" relation="include">
        </childnode>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="860" relation="include">
        </childnode>
        <childnode refid="862" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
        <childnode refid="863" relation="include">
        </childnode>
      </node>
      <node id="775">
        <label>char_samp.h</label>
        <link refid="char__samp_8h"/>
        <childnode refid="776" relation="include">
        </childnode>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="779" relation="include">
        </childnode>
        <childnode refid="782" relation="include">
        </childnode>
      </node>
      <node id="846">
        <label>ipoints.h</label>
        <link refid="ipoints_8h"/>
        <childnode refid="788" relation="include">
        </childnode>
      </node>
      <node id="847">
        <label>mod128.h</label>
        <link refid="mod128_8h"/>
        <childnode refid="845" relation="include">
        </childnode>
      </node>
      <node id="840">
        <label>elst2.h</label>
        <link refid="elst2_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="830" relation="include">
        </childnode>
        <childnode refid="832" relation="include">
        </childnode>
      </node>
      <node id="858">
        <label>pthread.h</label>
      </node>
      <node id="791">
        <label>char_set.h</label>
        <link refid="char__set_8h"/>
        <childnode refid="783" relation="include">
        </childnode>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="784" relation="include">
        </childnode>
        <childnode refid="782" relation="include">
        </childnode>
        <childnode refid="792" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
        <childnode refid="805" relation="include">
        </childnode>
      </node>
      <node id="783">
        <label>string.h</label>
      </node>
      <node id="768">
        <label>cube_object.h</label>
        <link refid="cube__object_8h"/>
        <childnode refid="769" relation="include">
        </childnode>
        <childnode refid="775" relation="include">
        </childnode>
        <childnode refid="786" relation="include">
        </childnode>
        <childnode refid="806" relation="include">
        </childnode>
        <childnode refid="824" relation="include">
        </childnode>
        <childnode refid="826" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
      </node>
      <node id="804">
        <label>unicharmap.h</label>
        <link refid="unicharmap_8h"/>
        <childnode refid="802" relation="include">
        </childnode>
      </node>
      <node id="877">
        <label>boxword.h</label>
        <link refid="boxword_8h"/>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="848" relation="include">
        </childnode>
      </node>
      <node id="802">
        <label>unichar.h</label>
        <link refid="unichar_8h"/>
        <childnode refid="803" relation="include">
        </childnode>
        <childnode refid="783" relation="include">
        </childnode>
      </node>
      <node id="855">
        <label>cutil.h</label>
        <link refid="cutil_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="783" relation="include">
        </childnode>
        <childnode refid="776" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="793" relation="include">
        </childnode>
        <childnode refid="856" relation="include">
        </childnode>
      </node>
      <node id="789">
        <label>cube_utils.h</label>
        <link refid="cube__utils_8h"/>
        <childnode refid="785" relation="include">
        </childnode>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="767" relation="include">
        </childnode>
        <childnode refid="790" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
        <childnode refid="775" relation="include">
        </childnode>
        <childnode refid="769" relation="include">
        </childnode>
      </node>
      <node id="807">
        <label>search_column.h</label>
        <link refid="search__column_8h"/>
        <childnode refid="808" relation="include">
        </childnode>
        <childnode refid="809" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
      </node>
      <node id="915">
        <label>findseam.h</label>
        <link refid="findseam_8h"/>
        <childnode refid="881" relation="include">
        </childnode>
        <childnode refid="912" relation="include">
        </childnode>
        <childnode refid="916" relation="include">
        </childnode>
      </node>
      <node id="848">
        <label>rect.h</label>
        <link refid="rect_8h"/>
        <childnode refid="788" relation="include">
        </childnode>
        <childnode refid="845" relation="include">
        </childnode>
        <childnode refid="799" relation="include">
        </childnode>
        <childnode refid="849" relation="include">
        </childnode>
        <childnode refid="793" relation="include">
        </childnode>
      </node>
      <node id="839">
        <label>bits16.h</label>
        <link refid="bits16_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
      </node>
      <node id="785">
        <label>vector</label>
      </node>
      <node id="796">
        <label>tesscallback.h</label>
        <link refid="tesscallback_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
      </node>
      <node id="859">
        <label>semaphore.h</label>
      </node>
      <node id="843">
        <label>coutln.h</label>
        <link refid="coutln_8h"/>
        <childnode refid="844" relation="include">
        </childnode>
        <childnode refid="847" relation="include">
        </childnode>
        <childnode refid="839" relation="include">
        </childnode>
        <childnode refid="848" relation="include">
        </childnode>
        <childnode refid="841" relation="include">
        </childnode>
        <childnode refid="849" relation="include">
        </childnode>
      </node>
      <node id="838">
        <label>werd.h</label>
        <link refid="werd_8h"/>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="839" relation="include">
        </childnode>
        <childnode refid="840" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
        <childnode refid="841" relation="include">
        </childnode>
        <childnode refid="842" relation="include">
        </childnode>
        <childnode refid="850" relation="include">
        </childnode>
      </node>
      <node id="806">
        <label>beam_search.h</label>
        <link refid="beam__search_8h"/>
        <childnode refid="807" relation="include">
        </childnode>
        <childnode refid="786" relation="include">
        </childnode>
        <childnode refid="823" relation="include">
        </childnode>
        <childnode refid="816" relation="include">
        </childnode>
        <childnode refid="789" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
        <childnode refid="767" relation="include">
        </childnode>
      </node>
      <node id="850">
        <label>ocrrow.h</label>
        <link refid="ocrrow_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="851" relation="include">
        </childnode>
        <childnode refid="838" relation="include">
        </childnode>
      </node>
      <node id="831">
        <label>fileerr.h</label>
        <link refid="fileerr_8h"/>
        <childnode refid="797" relation="include">
        </childnode>
      </node>
      <node id="899">
        <label>mfoutline.h</label>
        <link refid="mfoutline_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="854" relation="include">
        </childnode>
        <childnode refid="900" relation="include">
        </childnode>
        <childnode refid="901" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
      </node>
      <node id="828">
        <label>ambigs.h</label>
        <link refid="ambigs_8h"/>
        <childnode refid="829" relation="include">
        </childnode>
        <childnode refid="793" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
        <childnode refid="795" relation="include">
        </childnode>
      </node>
      <node id="904">
        <label>unicity_table.h</label>
        <link refid="unicity__table_8h"/>
        <childnode refid="796" relation="include">
        </childnode>
        <childnode refid="797" relation="include">
        </childnode>
        <childnode refid="795" relation="include">
        </childnode>
      </node>
      <node id="887">
        <label>time.h</label>
      </node>
      <node id="844">
        <label>crakedge.h</label>
        <link refid="crakedge_8h"/>
        <childnode refid="845" relation="include">
        </childnode>
        <childnode refid="847" relation="include">
        </childnode>
      </node>
      <node id="788">
        <label>math.h</label>
      </node>
      <node id="882">
        <label>split.h</label>
        <link refid="split_8h"/>
        <childnode refid="875" relation="include">
        </childnode>
        <childnode refid="854" relation="include">
        </childnode>
      </node>
      <node id="832">
        <label>lsterr.h</label>
        <link refid="lsterr_8h"/>
        <childnode refid="797" relation="include">
        </childnode>
      </node>
      <node id="852">
        <label>quadratc.h</label>
        <link refid="quadratc_8h"/>
        <childnode refid="845" relation="include">
        </childnode>
      </node>
      <node id="876">
        <label>vecfuncs.h</label>
        <link refid="vecfuncs_8h"/>
        <childnode refid="788" relation="include">
        </childnode>
        <childnode refid="875" relation="include">
        </childnode>
      </node>
      <node id="809">
        <label>lang_mod_edge.h</label>
        <link refid="lang__mod__edge_8h"/>
        <childnode refid="810" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
      </node>
      <node id="869">
        <label>publictypes.h</label>
        <link refid="publictypes_8h"/>
      </node>
      <node id="854">
        <label>oldlist.h</label>
        <link refid="oldlist_8h"/>
        <childnode refid="855" relation="include">
        </childnode>
        <childnode refid="796" relation="include">
        </childnode>
      </node>
      <node id="906">
        <label>ocrfeatures.h</label>
        <link refid="ocrfeatures_8h"/>
        <childnode refid="875" relation="include">
        </childnode>
        <childnode refid="777" relation="include">
        </childnode>
      </node>
      <node id="891">
        <label>gap_map.h</label>
        <link refid="gap__map_8h"/>
        <childnode refid="890" relation="include">
        </childnode>
        <childnode refid="837" relation="include">
        </childnode>
      </node>
      <node id="867">
        <label>ocrblock.h</label>
        <link refid="ocrblock_8h"/>
        <childnode refid="769" relation="include">
        </childnode>
        <childnode refid="868" relation="include">
        </childnode>
        <childnode refid="850" relation="include">
        </childnode>
        <childnode refid="870" relation="include">
        </childnode>
      </node>
      <node id="794">
        <label>params.h</label>
        <link refid="params_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
      </node>
      <node id="795">
        <label>genericvector.h</label>
        <link refid="genericvector_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="776" relation="include">
        </childnode>
        <childnode refid="796" relation="include">
        </childnode>
        <childnode refid="797" relation="include">
        </childnode>
        <childnode refid="798" relation="include">
        </childnode>
        <childnode refid="799" relation="include">
        </childnode>
      </node>
      <node id="860">
        <label>stopper.h</label>
        <link refid="stopper_8h"/>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="861" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
      </node>
      <node id="770">
        <label>memry.h</label>
        <link refid="memry_8h"/>
        <childnode refid="771" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
      </node>
      <node id="779">
        <label>bmp_8.h</label>
        <link refid="bmp__8_8h"/>
        <childnode refid="776" relation="include">
        </childnode>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="780" relation="include">
        </childnode>
        <childnode refid="781" relation="include">
        </childnode>
      </node>
      <node id="888">
        <label>textord.h</label>
        <link refid="textord_8h"/>
        <childnode refid="889" relation="include">
        </childnode>
        <childnode refid="890" relation="include">
        </childnode>
        <childnode refid="891" relation="include">
        </childnode>
        <childnode refid="837" relation="include">
        </childnode>
        <childnode refid="869" relation="include">
        </childnode>
      </node>
      <node id="902">
        <label>protos.h</label>
        <link refid="protos_8h"/>
        <childnode refid="903" relation="include">
        </childnode>
        <childnode refid="855" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
        <childnode refid="904" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
      </node>
      <node id="780">
        <label>con_comp.h</label>
        <link refid="con__comp_8h"/>
      </node>
      <node id="822">
        <label>word_unigrams.h</label>
        <link refid="word__unigrams_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
        <childnode refid="816" relation="include">
        </childnode>
      </node>
      <node id="874">
        <label>pageres.h</label>
        <link refid="pageres_8h"/>
        <childnode refid="875" relation="include">
        </childnode>
        <childnode refid="877" relation="include">
        </childnode>
        <childnode refid="829" relation="include">
        </childnode>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="878" relation="include">
        </childnode>
        <childnode refid="867" relation="include">
        </childnode>
        <childnode refid="850" relation="include">
        </childnode>
        <childnode refid="879" relation="include">
        </childnode>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="880" relation="include">
        </childnode>
        <childnode refid="881" relation="include">
        </childnode>
        <childnode refid="838" relation="include">
        </childnode>
      </node>
      <node id="911">
        <label>language_model.h</label>
        <link refid="language__model_8h"/>
        <childnode refid="893" relation="include">
        </childnode>
        <childnode refid="833" relation="include">
        </childnode>
        <childnode refid="827" relation="include">
        </childnode>
        <childnode refid="907" relation="include">
        </childnode>
        <childnode refid="897" relation="include">
        </childnode>
        <childnode refid="894" relation="include">
        </childnode>
        <childnode refid="912" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="874" relation="include">
        </childnode>
      </node>
      <node id="905">
        <label>featdefs.h</label>
        <link refid="featdefs_8h"/>
        <childnode refid="906" relation="include">
        </childnode>
      </node>
      <node id="810">
        <label>cube_tuning_params.h</label>
        <link refid="cube__tuning__params_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="811" relation="include">
        </childnode>
      </node>
      <node id="868">
        <label>ocrpara.h</label>
        <link refid="ocrpara_8h"/>
        <childnode refid="869" relation="include">
        </childnode>
        <childnode refid="829" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
      </node>
      <node id="829">
        <label>elst.h</label>
        <link refid="elst_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="830" relation="include">
        </childnode>
        <childnode refid="832" relation="include">
        </childnode>
      </node>
      <node id="801">
        <label>unicharset.h</label>
        <link refid="unicharset_8h"/>
        <childnode refid="797" relation="include">
        </childnode>
        <childnode refid="798" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
        <childnode refid="796" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
        <childnode refid="804" relation="include">
        </childnode>
      </node>
      <node id="817">
        <label>char_altlist.h</label>
        <link refid="char__altlist_8h"/>
        <childnode refid="787" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
      </node>
      <node id="881">
        <label>seam.h</label>
        <link refid="seam_8h"/>
        <childnode refid="875" relation="include">
        </childnode>
        <childnode refid="882" relation="include">
        </childnode>
        <childnode refid="883" relation="include">
        </childnode>
      </node>
      <node id="866">
        <label>control.h</label>
        <link refid="control_8h"/>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="867" relation="include">
        </childnode>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="873" relation="include">
        </childnode>
        <childnode refid="874" relation="include">
        </childnode>
        <childnode refid="837" relation="include">
        </childnode>
      </node>
      <node id="912">
        <label>oldheap.h</label>
        <link refid="oldheap_8h"/>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="855" relation="include">
        </childnode>
      </node>
      <node id="833">
        <label>dawg.h</label>
        <link refid="dawg_8h"/>
        <childnode refid="829" relation="include">
        </childnode>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="796" relation="include">
        </childnode>
      </node>
      <node id="907">
        <label>fontinfo.h</label>
        <link refid="fontinfo_8h"/>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="802" relation="include">
        </childnode>
      </node>
      <node id="845">
        <label>points.h</label>
        <link refid="points_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="788" relation="include">
        </childnode>
        <childnode refid="829" relation="include">
        </childnode>
        <childnode refid="846" relation="include">
        </childnode>
      </node>
      <node id="896">
        <label>adaptive.h</label>
        <link refid="adaptive_8h"/>
        <childnode refid="854" relation="include">
        </childnode>
        <childnode refid="897" relation="include">
        </childnode>
        <childnode refid="777" relation="include">
        </childnode>
      </node>
      <node id="837">
        <label>notdll.h</label>
        <link refid="notdll_8h"/>
      </node>
      <node id="805">
        <label>cube_const.h</label>
        <link refid="cube__const_8h"/>
      </node>
      <node id="769">
        <label>img.h</label>
        <link refid="img_8h"/>
        <childnode refid="770" relation="include">
        </childnode>
      </node>
      <node id="793">
        <label>tprintf.h</label>
        <link refid="tprintf_8h"/>
        <childnode refid="794" relation="include">
        </childnode>
      </node>
      <node id="909">
        <label>intmatcher.h</label>
        <link refid="intmatcher_8h"/>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="897" relation="include">
        </childnode>
        <childnode refid="910" relation="include">
        </childnode>
      </node>
      <node id="872">
        <label>hpddef.h</label>
        <link refid="hpddef_8h"/>
      </node>
      <node id="784">
        <label>algorithm</label>
      </node>
      <node id="772">
        <label>host.h</label>
        <link refid="host_8h"/>
        <childnode refid="773" relation="include">
        </childnode>
      </node>
      <node id="824">
        <label>cube_search_object.h</label>
        <link refid="cube__search__object_8h"/>
        <childnode refid="823" relation="include">
        </childnode>
        <childnode refid="775" relation="include">
        </childnode>
        <childnode refid="825" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
        <childnode refid="767" relation="include">
        </childnode>
      </node>
      <node id="820">
        <label>word_size_model.h</label>
        <link refid="word__size__model_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="775" relation="include">
        </childnode>
        <childnode refid="791" relation="include">
        </childnode>
      </node>
      <node id="781">
        <label>cached_file.h</label>
        <link refid="cached__file_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="778" relation="include">
        </childnode>
      </node>
      <node id="870">
        <label>pdblock.h</label>
        <link refid="pdblock_8h"/>
        <childnode refid="836" relation="include">
        </childnode>
        <childnode refid="769" relation="include">
        </childnode>
        <childnode refid="800" relation="include">
        </childnode>
        <childnode refid="871" relation="include">
        </childnode>
        <childnode refid="872" relation="include">
        </childnode>
      </node>
      <node id="777">
        <label>stdio.h</label>
      </node>
      <node id="826">
        <label>tess_lang_model.h</label>
        <link refid="tess__lang__model_8h"/>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="817" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
        <childnode refid="810" relation="include">
        </childnode>
        <childnode refid="827" relation="include">
        </childnode>
        <childnode refid="816" relation="include">
        </childnode>
        <childnode refid="792" relation="include">
        </childnode>
        <childnode refid="864" relation="include">
        </childnode>
      </node>
      <node id="815">
        <label>input_file_buffer.h</label>
        <link refid="input__file__buffer_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="778" relation="include">
        </childnode>
      </node>
      <node id="782">
        <label>string_32.h</label>
        <link refid="string__32_8h"/>
        <childnode refid="783" relation="include">
        </childnode>
        <childnode refid="778" relation="include">
        </childnode>
        <childnode refid="784" relation="include">
        </childnode>
        <childnode refid="785" relation="include">
        </childnode>
      </node>
      <node id="894">
        <label>matrix.h</label>
        <link refid="matrix_8h"/>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
      </node>
      <node id="897">
        <label>intproto.h</label>
        <link refid="intproto_8h"/>
        <childnode refid="795" relation="include">
        </childnode>
        <childnode refid="898" relation="include">
        </childnode>
        <childnode refid="899" relation="include">
        </childnode>
        <childnode refid="902" relation="include">
        </childnode>
        <childnode refid="849" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
      </node>
      <node id="823">
        <label>search_object.h</label>
        <link refid="search__object_8h"/>
        <childnode refid="817" relation="include">
        </childnode>
        <childnode refid="775" relation="include">
        </childnode>
        <childnode refid="812" relation="include">
        </childnode>
      </node>
      <node id="792">
        <label>tessdatamanager.h</label>
        <link refid="tessdatamanager_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
        <childnode refid="793" relation="include">
        </childnode>
      </node>
      <node id="878">
        <label>normalis.h</label>
        <link refid="normalis_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="772" relation="include">
        </childnode>
      </node>
      <node id="800">
        <label>strngs.h</label>
        <link refid="strngs_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="783" relation="include">
        </childnode>
        <childnode refid="773" relation="include">
        </childnode>
        <childnode refid="770" relation="include">
        </childnode>
      </node>
      <node id="787">
        <label>altlist.h</label>
        <link refid="altlist_8h"/>
        <childnode refid="788" relation="include">
        </childnode>
        <childnode refid="789" relation="include">
        </childnode>
      </node>
      <node id="875">
        <label>blobs.h</label>
        <link refid="blobs_8h"/>
        <childnode refid="836" relation="include">
        </childnode>
        <childnode refid="848" relation="include">
        </childnode>
        <childnode refid="876" relation="include">
        </childnode>
      </node>
      <node id="798">
        <label>helpers.h</label>
        <link refid="helpers_8h"/>
        <childnode refid="777" relation="include">
        </childnode>
        <childnode refid="783" relation="include">
        </childnode>
      </node>
      <node id="863">
        <label>permute.h</label>
        <link refid="permute_8h"/>
        <childnode refid="834" relation="include">
        </childnode>
        <childnode refid="794" relation="include">
        </childnode>
        <childnode refid="801" relation="include">
        </childnode>
      </node>
      <node id="851">
        <label>quspline.h</label>
        <link refid="quspline_8h"/>
        <childnode refid="852" relation="include">
        </childnode>
        <childnode refid="830" relation="include">
        </childnode>
        <childnode refid="770" relation="include">
        </childnode>
        <childnode refid="848" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innernamespace refid="namespacetesseract">tesseract</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/******************************************************************</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>File:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cube_control.cpp</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Description:<sp/>Tesseract<sp/>class<sp/>methods<sp/>for<sp/>invoking<sp/>cube<sp/>convolutional</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>neural<sp/>network<sp/>word<sp/>recognizer.</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>Author:<sp/><sp/><sp/><sp/><sp/><sp/>Raquel<sp/>Romano</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>Created:<sp/><sp/><sp/><sp/><sp/>September<sp/>2009</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Include<sp/>automatically<sp/>generated<sp/>configuration<sp/>file<sp/>if<sp/>running<sp/>autoconf.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HAVE_CONFIG_H</highlight></codeline>
<codeline lineno="12"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#include<sp/>&quot;config_auto.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="14"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;allheaders.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="cube__object_8h" kindref="compound">cube_object.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="cube__reco__context_8h" kindref="compound">cube_reco_context.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="tesseractclass_8h" kindref="compound">tesseractclass.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="tesseract__cube__combiner_8h" kindref="compound">tesseract_cube_combiner.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespacetesseract-c__api-demo_1afed58feacb84df2de88bdd613cfdba6d" kindref="member">tesseract</ref><sp/>{</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/>convert_prob_to_tess_certainty</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/>Normalize<sp/>a<sp/>probability<sp/>in<sp/>the<sp/>range<sp/>[0.0,<sp/>1.0]<sp/>to<sp/>a<sp/>tesseract</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/>certainty<sp/>in<sp/>the<sp/>range<sp/>[-20.0,<sp/>0.0]</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>convert_prob_to_tess_certainty(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>prob)<sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(prob<sp/>-<sp/>1.0)<sp/>*<sp/>20.0;</highlight></codeline>
<codeline lineno="32"><highlight class="normal">}</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*<sp/>char_box_to_tbox</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="37"><highlight class="comment"><sp/>*<sp/>Create<sp/>a<sp/>TBOX<sp/>from<sp/>a<sp/>character<sp/>bounding<sp/>box.<sp/>If<sp/>nonzero,<sp/>the</highlight></codeline>
<codeline lineno="38"><highlight class="comment"><sp/>*<sp/>x_offset<sp/>accounts<sp/>for<sp/>any<sp/>additional<sp/>padding<sp/>of<sp/>the<sp/>word<sp/>box<sp/>that</highlight></codeline>
<codeline lineno="39"><highlight class="comment"><sp/>*<sp/>should<sp/>be<sp/>taken<sp/>into<sp/>account.</highlight></codeline>
<codeline lineno="40"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="41"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/><ref refid="namespacetesseract_1abe832326e054f5b25a1fc79566c92742" kindref="member">char_box_to_tbox</ref>(Box*<sp/>char_box,<sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>word_box,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x_offset)<sp/>{</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/>l_int32<sp/>left;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/>l_int32<sp/>top;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/>l_int32<sp/>width;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/>l_int32<sp/>height;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/>l_int32<sp/>right;</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/>l_int32<sp/>bottom;</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/>boxGetGeometry(char_box,<sp/>&amp;left,<sp/>&amp;top,<sp/>&amp;width,<sp/>&amp;height);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/>left<sp/>+=<sp/>word_box.<ref refid="class_t_b_o_x_1a724fabf566586b663577dfa944ffbc61" kindref="member">left</ref>()<sp/>-<sp/>x_offset;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/>right<sp/>=<sp/>left<sp/>+<sp/>width;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/>top<sp/>=<sp/>word_box.<ref refid="class_t_b_o_x_1a4451d237f1cd18c4982d63fe36a11fc3" kindref="member">bottom</ref>()<sp/>+<sp/>word_box.<ref refid="class_t_b_o_x_1a8379d4bbc72bdbb1f069fc14790e632d" kindref="member">height</ref>()<sp/>-<sp/>top;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/>bottom<sp/>=<sp/>top<sp/>-<sp/>height;</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref>(left,<sp/>bottom,<sp/>right,<sp/>top);</highlight></codeline>
<codeline lineno="56"><highlight class="normal">}</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="59"><highlight class="comment"><sp/>*<sp/>extract_cube_state</highlight></codeline>
<codeline lineno="60"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="61"><highlight class="comment"><sp/>*<sp/>Extract<sp/>CharSamp<sp/>objects<sp/>and<sp/>character<sp/>bounding<sp/>boxes<sp/>from<sp/>the</highlight></codeline>
<codeline lineno="62"><highlight class="comment"><sp/>*<sp/>CubeObject&apos;s<sp/>state.<sp/>The<sp/>caller<sp/>should<sp/>free<sp/>both<sp/>structres.</highlight></codeline>
<codeline lineno="63"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="64"><highlight class="comment">**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_1a2e3c28addfd0b71c35f3b2b44c5f300a" kindref="member">Tesseract::extract_cube_state</ref>(CubeObject*<sp/>cube_obj,</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>num_chars,</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Boxa**<sp/>char_boxes,</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CharSamp***<sp/>char_samples)<sp/>{</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!cube_obj)<sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>WARNING<sp/>(extract_cube_state):<sp/>Invalid<sp/>cube<sp/>object<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;passed<sp/>to<sp/>extract_cube_state\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Note<sp/>that<sp/>the<sp/>CubeObject<sp/>accessors<sp/>return<sp/>either<sp/>the<sp/>deslanted<sp/>or</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>regular<sp/>objects<sp/>search<sp/>object<sp/>or<sp/>beam<sp/>search<sp/>object,<sp/>whichever</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>was<sp/>used<sp/>in<sp/>the<sp/>last<sp/>call<sp/>to<sp/>Recognize()</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/>CubeSearchObject*<sp/>cube_search_obj<sp/>=<sp/>cube_obj-&gt;SrchObj();</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!cube_search_obj)<sp/>{</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>WARNING<sp/>(Extract_cube_state):<sp/>Could<sp/>not<sp/>retrieve<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;cube&apos;s<sp/>search<sp/>object<sp/>in<sp/>extract_cube_state.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/>BeamSearch<sp/>*beam_search_obj<sp/>=<sp/>cube_obj-&gt;BeamObj();</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!beam_search_obj)<sp/>{</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>WARNING<sp/>(Extract_cube_state):<sp/>Could<sp/>not<sp/>retrieve<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;cube&apos;s<sp/>beam<sp/>search<sp/>object<sp/>in<sp/>extract_cube_state.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>the<sp/>character<sp/>samples<sp/>and<sp/>bounding<sp/>boxes<sp/>by<sp/>backtracking</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>through<sp/>the<sp/>beam<sp/>search<sp/>path</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>best_node_index<sp/>=<sp/>beam_search_obj-&gt;BestPresortedNodeIndex();</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/>*char_samples<sp/>=<sp/>beam_search_obj-&gt;BackTrack(</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>cube_search_obj,<sp/>best_node_index,<sp/>num_chars,<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>char_boxes);</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!*char_samples)</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="105"><highlight class="normal">}</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="108"><highlight class="comment"><sp/>*<sp/>create_cube_box_word</highlight></codeline>
<codeline lineno="109"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="110"><highlight class="comment"><sp/>*<sp/>Fill<sp/>the<sp/>given<sp/>BoxWord<sp/>with<sp/>boxes<sp/>from<sp/>character<sp/>bounding</highlight></codeline>
<codeline lineno="111"><highlight class="comment"><sp/>*<sp/>boxes.<sp/>The<sp/>char_boxes<sp/>have<sp/>local<sp/>coordinates<sp/>w.r.t.<sp/>the</highlight></codeline>
<codeline lineno="112"><highlight class="comment"><sp/>*<sp/>word<sp/>bounding<sp/>box,<sp/>i.e.,<sp/>the<sp/>left-most<sp/>character<sp/>bbox<sp/>of<sp/>each<sp/>word</highlight></codeline>
<codeline lineno="113"><highlight class="comment"><sp/>*<sp/>has<sp/>(0,0)<sp/>left-top<sp/>coord,<sp/>but<sp/>the<sp/>BoxWord<sp/>must<sp/>be<sp/>defined<sp/>in<sp/>page</highlight></codeline>
<codeline lineno="114"><highlight class="comment"><sp/>*<sp/>coordinates.</highlight></codeline>
<codeline lineno="115"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_1af74e0ab752d3f52ba97019167549217e" kindref="member">Tesseract::create_cube_box_word</ref>(Boxa<sp/>*char_boxes,</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>num_chars,</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>word_box,</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>BoxWord*<sp/>box_word)<sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!box_word)<sp/>{</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>WARNING<sp/>(create_cube_box_word):<sp/>Invalid<sp/>box_word.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Find<sp/>the<sp/>x-coordinate<sp/>of<sp/>left-most<sp/>char_box,<sp/>which<sp/>could<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>nonzero<sp/>if<sp/>the<sp/>word<sp/>image<sp/>was<sp/>padded<sp/>before<sp/>recognition<sp/>took<sp/>place.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x_offset<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>num_chars;<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>Box*<sp/>char_box<sp/>=<sp/>boxaGetBox(char_boxes,<sp/>i,<sp/>L_CLONE);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(x_offset<sp/>&lt;<sp/>0<sp/>||<sp/>char_box-&gt;x<sp/>&lt;<sp/>x_offset)<sp/>{</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>x_offset<sp/>=<sp/>char_box-&gt;x;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>boxDestroy(&amp;char_box);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>num_chars;<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>Box*<sp/>char_box<sp/>=<sp/>boxaGetBox(char_boxes,<sp/>i,<sp/>L_CLONE);</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>tbox<sp/>=<sp/><ref refid="namespacetesseract_1abe832326e054f5b25a1fc79566c92742" kindref="member">char_box_to_tbox</ref>(char_box,<sp/>word_box,<sp/>x_offset);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/>boxDestroy(&amp;char_box);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/>box_word-&gt;InsertBox(i,<sp/>tbox);</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="145"><highlight class="normal">}</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="148"><highlight class="comment"><sp/>*<sp/>create_werd_choice</highlight></codeline>
<codeline lineno="149"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="150"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="class_w_e_r_d___c_h_o_i_c_e" kindref="compound">WERD_CHOICE</ref><sp/>*create_werd_choice(</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CharSamp**<sp/>char_samples,</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>num_chars,</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>str,</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>certainty,</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_u_n_i_c_h_a_r_s_e_t" kindref="compound">UNICHARSET</ref><sp/>&amp;unicharset,</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CharSet*<sp/>cube_char_set</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Insert<sp/>unichar<sp/>ids<sp/>into<sp/>WERD_CHOICE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><ref refid="class_w_e_r_d___c_h_o_i_c_e" kindref="compound">WERD_CHOICE</ref><sp/>*werd_choice<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_w_e_r_d___c_h_o_i_c_e" kindref="compound">WERD_CHOICE</ref>(&amp;unicharset,<sp/>num_chars);</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>within<sp/>a<sp/>word,<sp/>cube<sp/>recognizes<sp/>the<sp/>word<sp/>in<sp/>reading<sp/>order.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/>werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a2632f7210781b5bb24e69c961fcf9401" kindref="member">set_unichars_in_script_order</ref>(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><ref refid="errcode_8h_1a93a603f4063a6b9403d81caa245a583b" kindref="member">ASSERT_HOST</ref>(werd_choice<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><ref refid="unichar_8h_1a8578b19fa1ff5ca75080db1a18ecc32e" kindref="member">UNICHAR_ID</ref><sp/>uch_id;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>num_chars;<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>uch_id<sp/>=<sp/>cube_char_set-&gt;UnicharID(char_samples[i]-&gt;StrLabel());</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(uch_id<sp/>!=<sp/>INVALID_UNICHAR_ID)</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a222ced86be88a66a119b6c5d10af23fb" kindref="member">append_unichar_id_space_allocated</ref>(</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uch_id,<sp/>1,<sp/>0.0,<sp/>certainty);</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><ref refid="class_b_l_o_b___c_h_o_i_c_e" kindref="compound">BLOB_CHOICE</ref><sp/>*blob_choice;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/>BLOB_CHOICE_LIST<sp/>*choices_list;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/>BLOB_CHOICE_IT<sp/>choices_list_it;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/>BLOB_CHOICE_LIST_CLIST<sp/>*blob_choices<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>BLOB_CHOICE_LIST_CLIST();</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/>BLOB_CHOICE_LIST_C_IT<sp/>blob_choices_it;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/>blob_choices_it.set_to_list(blob_choices);</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a7be59abe97b052dd3aaa324aea8c4a6c" kindref="member">length</ref>();<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>new<sp/>BLOB_CHOICE_LIST<sp/>for<sp/>this<sp/>unichar</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/>choices_list<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>BLOB_CHOICE_LIST();</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>choices_list_it.set_to_list(choices_list);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Add<sp/>a<sp/>single<sp/>BLOB_CHOICE<sp/>to<sp/>the<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/>blob_choice<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_b_l_o_b___c_h_o_i_c_e" kindref="compound">BLOB_CHOICE</ref>(werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a6b917b2e6157f7956ff53ca230425ed3" kindref="member">unichar_id</ref>(i),</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.0,<sp/>certainty,<sp/>-1,<sp/>-1,<sp/>0,<sp/>0,<sp/>0,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/>choices_list_it.add_after_then_move(blob_choice);</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Add<sp/>list<sp/>to<sp/>the<sp/>clist</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>blob_choices_it.add_to_end(choices_list);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/>werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a0d8b3f73cb02eb5f6e492ffd1304fe85" kindref="member">set_certainty</ref>(certainty);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/>werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1ad25fbd8b04dd1e3def8701fa55f1466d" kindref="member">set_blob_choices</ref>(blob_choices);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>werd_choice;</highlight></codeline>
<codeline lineno="193"><highlight class="normal">}</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="196"><highlight class="comment"><sp/>*<sp/>init_cube_objects</highlight></codeline>
<codeline lineno="197"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="198"><highlight class="comment"><sp/>*<sp/>Instantiates<sp/>Tesseract<sp/>object&apos;s<sp/>CubeRecoContext<sp/>and<sp/>TesseractCubeCombiner.</highlight></codeline>
<codeline lineno="199"><highlight class="comment"><sp/>*<sp/>Returns<sp/>false<sp/>if<sp/>cube<sp/>context<sp/>could<sp/>not<sp/>be<sp/>created<sp/>or<sp/>if<sp/>load_combiner<sp/>is</highlight></codeline>
<codeline lineno="200"><highlight class="comment"><sp/>*<sp/>true,<sp/>but<sp/>the<sp/>combiner<sp/>could<sp/>not<sp/>be<sp/>loaded.</highlight></codeline>
<codeline lineno="201"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_1a25758758ee9ca656a83664eac9b0547c" kindref="member">Tesseract::init_cube_objects</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>load_combiner,</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TessdataManager<sp/>*tessdata_manager)<sp/>{</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><ref refid="errcode_8h_1a93a603f4063a6b9403d81caa245a583b" kindref="member">ASSERT_HOST</ref>(cube_cntxt_<sp/>==<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><ref refid="errcode_8h_1a93a603f4063a6b9403d81caa245a583b" kindref="member">ASSERT_HOST</ref>(tess_cube_combiner_<sp/>==<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>);</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>the<sp/>cube<sp/>context<sp/>object</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/>cube_cntxt_<sp/>=<sp/><ref refid="classtesseract_1_1_cube_reco_context_1ac513bc107db9dd938464bcecc50ad61b" kindref="member">CubeRecoContext::Create</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>tessdata_manager,<sp/>&amp;unicharset);</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_cntxt_<sp/>==<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>WARNING<sp/>(Tesseract::init_cube_objects()):<sp/>Failed<sp/>to<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;instantiate<sp/>CubeRecoContext\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>the<sp/>combiner<sp/>object<sp/>and<sp/>load<sp/>the<sp/>combiner<sp/>net<sp/>for<sp/>target<sp/>languages.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(load_combiner)<sp/>{</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/>tess_cube_combiner_<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_cube_combiner" kindref="compound">tesseract::TesseractCubeCombiner</ref>(cube_cntxt_);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!tess_cube_combiner_<sp/>||<sp/>!tess_cube_combiner_-&gt;<ref refid="classtesseract_1_1_tesseract_cube_combiner_1a3de63e254e7fcb9b11368aae332b7cbd" kindref="member">LoadCombinerNet</ref>())<sp/>{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>cube_cntxt_;</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>cube_cntxt_<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tess_cube_combiner_<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>tess_cube_combiner_;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tess_cube_combiner_<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>ERROR<sp/>(Failed<sp/>to<sp/>instantiate<sp/>TesseractCubeCombiner\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="233"><highlight class="normal">}</highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="236"><highlight class="comment"><sp/>*<sp/>run_cube_combiner</highlight></codeline>
<codeline lineno="237"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="238"><highlight class="comment"><sp/>*<sp/>Iterates<sp/>through<sp/>tesseract&apos;s<sp/>results<sp/>and<sp/>calls<sp/>cube<sp/>on<sp/>each<sp/>word,</highlight></codeline>
<codeline lineno="239"><highlight class="comment"><sp/>*<sp/>combining<sp/>the<sp/>results<sp/>with<sp/>the<sp/>existing<sp/>tesseract<sp/>result.</highlight></codeline>
<codeline lineno="240"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_1a09bad27517f895968573624c3602b600" kindref="member">Tesseract::run_cube_combiner</ref>(<ref refid="class_p_a_g_e___r_e_s" kindref="compound">PAGE_RES</ref><sp/>*page_res)<sp/>{</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(page_res<sp/>==<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>||<sp/>tess_cube_combiner_<sp/>==<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><ref refid="class_p_a_g_e___r_e_s___i_t" kindref="compound">PAGE_RES_IT</ref><sp/>page_res_it(page_res);</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Iterate<sp/>through<sp/>the<sp/>word<sp/>results<sp/>and<sp/>call<sp/>cube<sp/>on<sp/>each<sp/>word.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(page_res_it.restart_page();<sp/>page_res_it.word<sp/>()<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>page_res_it.forward())<sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_w_e_r_d___r_e_s" kindref="compound">WERD_RES</ref>*<sp/>word<sp/>=<sp/>page_res_it.<ref refid="class_w_e_r_d___r_e_s_1afc15fa7c1b5ad55d6772dea0d6865df1" kindref="member">word</ref>();</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Skip<sp/>cube<sp/>entirely<sp/>if<sp/>tesseract&apos;s<sp/>certainty<sp/>is<sp/>greater<sp/>than<sp/>threshold.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>combiner_run_thresh<sp/>=<sp/>convert_prob_to_tess_certainty(</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cube_cntxt_-&gt;<ref refid="classtesseract_1_1_cube_reco_context_1addac767dbdf8405f9026848a17561556" kindref="member">Params</ref>()-&gt;<ref refid="classtesseract_1_1_tuning_params_1ab65808e3fa6cb1cc11d9279a1a405c1f" kindref="member">CombinerRunThresh</ref>());</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3d42ac7ec121263e757c9b7160dfd50d" kindref="member">best_choice</ref>-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a1b25ef2b44d21a7204483a7ca804f293" kindref="member">certainty</ref>()<sp/>&gt;=<sp/>combiner_run_thresh)<sp/>{</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>the<sp/>same<sp/>language<sp/>as<sp/>Tesseract<sp/>used<sp/>for<sp/>the<sp/>word.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_tesseract_1acb222c1c275843998e343f0ed65cefd6" kindref="member">Tesseract</ref>*<sp/>lang_tess<sp/>=<sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a2e616f878c75833272f3f800827c2db6" kindref="member">tesseract</ref>;</highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Setup<sp/>a<sp/>trial<sp/>WERD_RES<sp/>in<sp/>which<sp/>to<sp/>classify<sp/>with<sp/>cube.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_w_e_r_d___r_e_s" kindref="compound">WERD_RES</ref><sp/>cube_word;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>cube_word.<ref refid="class_w_e_r_d___r_e_s_1af63cf973974fc961f82fae0af07a635d" kindref="member">InitForRetryRecognition</ref>(*word);</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/>CubeObject<sp/>*cube_obj<sp/>=<sp/>lang_tess-&gt;cube_recognize_word(</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>page_res_it.block()-&gt;block,<sp/>&amp;cube_word);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_obj<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>lang_tess-&gt;cube_combine_word(cube_obj,<sp/>&amp;cube_word,<sp/>word);</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>cube_obj;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="267"><highlight class="normal">}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="270"><highlight class="comment"><sp/>*<sp/>cube_word_pass1</highlight></codeline>
<codeline lineno="271"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="272"><highlight class="comment"><sp/>*<sp/>Recognizes<sp/>a<sp/>single<sp/>word<sp/>using<sp/>(only)<sp/>cube.<sp/>Compatible<sp/>with</highlight></codeline>
<codeline lineno="273"><highlight class="comment"><sp/>*<sp/>Tesseract&apos;s<sp/>classify_word_pass1/classify_word_pass2.</highlight></codeline>
<codeline lineno="274"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_1ad0e3283482a5589b645e3b352b1639b3" kindref="member">Tesseract::cube_word_pass1</ref>(<ref refid="class_b_l_o_c_k" kindref="compound">BLOCK</ref>*<sp/>block,<sp/><ref refid="class_r_o_w" kindref="compound">ROW</ref><sp/>*row,<sp/><ref refid="class_w_e_r_d___r_e_s" kindref="compound">WERD_RES</ref><sp/>*word)<sp/>{</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/>CubeObject<sp/>*cube_obj<sp/>=<sp/><ref refid="classtesseract_1_1_tesseract_1ac5142579ded8e6d850931f0dac860868" kindref="member">cube_recognize_word</ref>(block,<sp/>word);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>cube_obj;</highlight></codeline>
<codeline lineno="278"><highlight class="normal">}</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="281"><highlight class="comment"><sp/>*<sp/>cube_recognize_word</highlight></codeline>
<codeline lineno="282"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="283"><highlight class="comment"><sp/>*<sp/>Cube<sp/>recognizer<sp/>to<sp/>recognize<sp/>a<sp/>single<sp/>word<sp/>as<sp/>with<sp/>classify_word_pass1</highlight></codeline>
<codeline lineno="284"><highlight class="comment"><sp/>*<sp/>but<sp/>also<sp/>returns<sp/>the<sp/>cube<sp/>object<sp/>in<sp/>case<sp/>the<sp/>combiner<sp/>is<sp/>needed.</highlight></codeline>
<codeline lineno="285"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal">CubeObject*<sp/><ref refid="classtesseract_1_1_tesseract_1ac5142579ded8e6d850931f0dac860868" kindref="member">Tesseract::cube_recognize_word</ref>(<ref refid="class_b_l_o_c_k" kindref="compound">BLOCK</ref>*<sp/>block,<sp/><ref refid="class_w_e_r_d___r_e_s" kindref="compound">WERD_RES</ref>*<sp/>word)<sp/>{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!cube_binary_<sp/>||<sp/>!cube_cntxt_)<sp/>{</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0<sp/>&amp;&amp;<sp/>!cube_binary_)</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Tesseract::run_cube():<sp/>NULL<sp/>binary<sp/>image.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a32f407a6bcc00a06118e83ec0531475a" kindref="member">SetupFake</ref>(unicharset);</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>word_box<sp/>=<sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1afc15fa7c1b5ad55d6772dea0d6865df1" kindref="member">word</ref>-&gt;<ref refid="class_w_e_r_d_1a151bbfb39ecdef93ab1a14b0f9e4ac74" kindref="member">bounding_box</ref>();</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(block<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref><sp/>&amp;&amp;<sp/>(block-&gt;<ref refid="class_b_l_o_c_k_1a820d5ff979ad26219ad3914551d70881" kindref="member">re_rotation</ref>().<ref refid="class_f_c_o_o_r_d_1a9edadbfc357c730f62fa3c92677b0d58" kindref="member">x</ref>()<sp/>!=<sp/>1.0f<sp/>||</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>block-&gt;<ref refid="class_b_l_o_c_k_1a820d5ff979ad26219ad3914551d70881" kindref="member">re_rotation</ref>().<ref refid="class_f_c_o_o_r_d_1a397f7ce997b246df18e7bd5a20cc422e" kindref="member">y</ref>()<sp/>!=<sp/>0.0f))<sp/>{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>TODO(rays)<sp/>We<sp/>have<sp/>to<sp/>rotate<sp/>the<sp/>bounding<sp/>box<sp/>to<sp/>get<sp/>the<sp/>true<sp/>coords.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>will<sp/>be<sp/>achieved<sp/>in<sp/>the<sp/>future<sp/>via<sp/>DENORM.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>In<sp/>the<sp/>mean<sp/>time,<sp/>cube<sp/>can&apos;t<sp/>process<sp/>this<sp/>word.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>can&apos;t<sp/>process<sp/>rotated<sp/>word<sp/>at:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>word_box.<ref refid="class_t_b_o_x_1a2e753aa9943276301d68e9f9cad99620" kindref="member">print</ref>();</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a32f407a6bcc00a06118e83ec0531475a" kindref="member">SetupFake</ref>(unicharset);</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/>CubeObject*<sp/>cube_obj<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_cube_object" kindref="compound">tesseract::CubeObject</ref>(</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>cube_cntxt_,<sp/>cube_binary_,<sp/>word_box.<ref refid="class_t_b_o_x_1a724fabf566586b663577dfa944ffbc61" kindref="member">left</ref>(),</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pixGetHeight(cube_binary_)<sp/>-<sp/>word_box.<ref refid="class_t_b_o_x_1adf92e9fdac1bdf11c10d1c4d1178791a" kindref="member">top</ref>(),</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>word_box.<ref refid="class_t_b_o_x_1af95494a2ccacc70cc2b83820b2948619" kindref="member">width</ref>(),<sp/>word_box.<ref refid="class_t_b_o_x_1a8379d4bbc72bdbb1f069fc14790e632d" kindref="member">height</ref>());</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classtesseract_1_1_tesseract_1ab675d07d57447f0d598c70ee4b5558bf" kindref="member">cube_recognize</ref>(cube_obj,<sp/>block,<sp/>word))<sp/>{</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>cube_obj;</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>cube_obj;</highlight></codeline>
<codeline lineno="315"><highlight class="normal">}</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="318"><highlight class="comment"><sp/>*<sp/>cube_combine_word</highlight></codeline>
<codeline lineno="319"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="320"><highlight class="comment"><sp/>*<sp/>Combines<sp/>the<sp/>cube<sp/>and<sp/>tesseract<sp/>results<sp/>for<sp/>a<sp/>single<sp/>word,<sp/>leaving<sp/>the</highlight></codeline>
<codeline lineno="321"><highlight class="comment"><sp/>*<sp/>result<sp/>in<sp/>tess_word.</highlight></codeline>
<codeline lineno="322"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_1a907b54d85da0efa125039bb6a90b2927" kindref="member">Tesseract::cube_combine_word</ref>(CubeObject*<sp/>cube_obj,<sp/><ref refid="class_w_e_r_d___r_e_s" kindref="compound">WERD_RES</ref>*<sp/>cube_word,</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_w_e_r_d___r_e_s" kindref="compound">WERD_RES</ref>*<sp/>tess_word)<sp/>{</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>combiner_prob<sp/>=<sp/>tess_cube_combiner_-&gt;<ref refid="classtesseract_1_1_tesseract_cube_combiner_1ab1690445d6285ffc5d59740f964acd50" kindref="member">CombineResults</ref>(tess_word,</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cube_obj);</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>combiner<sp/>probability<sp/>is<sp/>greater<sp/>than<sp/>tess/cube<sp/>combiner</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>classifier<sp/>threshold,<sp/>i.e.<sp/>tesseract<sp/>wins,<sp/>then<sp/>just<sp/>return<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>tesseract<sp/>result<sp/>unchanged,<sp/>as<sp/>the<sp/>combiner<sp/>knows<sp/>nothing<sp/>about<sp/>how</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>correct<sp/>the<sp/>answer<sp/>is.<sp/>If<sp/>cube<sp/>and<sp/>tesseract<sp/>agree,<sp/>then<sp/>improve<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>scores<sp/>before<sp/>returning.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><ref refid="class_w_e_r_d___c_h_o_i_c_e" kindref="compound">WERD_CHOICE</ref>*<sp/>tess_best<sp/>=<sp/>tess_word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3d42ac7ec121263e757c9b7160dfd50d" kindref="member">best_choice</ref>;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><ref refid="class_w_e_r_d___c_h_o_i_c_e" kindref="compound">WERD_CHOICE</ref>*<sp/>cube_best<sp/>=<sp/>cube_word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3d42ac7ec121263e757c9b7160dfd50d" kindref="member">best_choice</ref>;</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>||<sp/>classify_debug_level)<sp/>{</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Combiner<sp/>prob<sp/>=<sp/>%g<sp/>vs<sp/>threshold<sp/>%g\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>combiner_prob,<sp/>cube_cntxt_-&gt;<ref refid="classtesseract_1_1_cube_reco_context_1addac767dbdf8405f9026848a17561556" kindref="member">Params</ref>()-&gt;<ref refid="classtesseract_1_1_tuning_params_1abb95e7c0511f7715eab7baa880f2daab" kindref="member">CombinerClassifierThresh</ref>());</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(combiner_prob<sp/>&gt;=</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>cube_cntxt_-&gt;<ref refid="classtesseract_1_1_cube_reco_context_1addac767dbdf8405f9026848a17561556" kindref="member">Params</ref>()-&gt;<ref refid="classtesseract_1_1_tuning_params_1abb95e7c0511f7715eab7baa880f2daab" kindref="member">CombinerClassifierThresh</ref>())<sp/>{</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tess_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a41d740f0accccdfb245d34d554122116" kindref="member">unichar_string</ref>()<sp/>==<sp/>cube_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a41d740f0accccdfb245d34d554122116" kindref="member">unichar_string</ref>())<sp/>{</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Cube<sp/>and<sp/>tess<sp/>agree,<sp/>so<sp/>improve<sp/>the<sp/>scores.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tess_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a8536420fe62adffbfda94a08796db533" kindref="member">set_rating</ref>(tess_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a52ea24dcb5ff15ad8aee3fd774622216" kindref="member">rating</ref>()<sp/>/<sp/>2);</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>tess_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a0d8b3f73cb02eb5f6e492ffd1304fe85" kindref="member">set_certainty</ref>(tess_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a1b25ef2b44d21a7204483a7ca804f293" kindref="member">certainty</ref>()<sp/>/<sp/>2);</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Cube<sp/>wins.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>It<sp/>is<sp/>better<sp/>for<sp/>the<sp/>language<sp/>combiner<sp/>to<sp/>have<sp/>all<sp/>tesseract<sp/>scores,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>so<sp/>put<sp/>them<sp/>in<sp/>the<sp/>cube<sp/>result.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/>cube_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a8536420fe62adffbfda94a08796db533" kindref="member">set_rating</ref>(tess_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a52ea24dcb5ff15ad8aee3fd774622216" kindref="member">rating</ref>());</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/>cube_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a0d8b3f73cb02eb5f6e492ffd1304fe85" kindref="member">set_certainty</ref>(tess_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a1b25ef2b44d21a7204483a7ca804f293" kindref="member">certainty</ref>());</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>||<sp/>classify_debug_level)<sp/>{</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>INFO:<sp/>tesseract<sp/>result<sp/>replaced<sp/>by<sp/>cube:<sp/>%s<sp/>-&gt;<sp/>%s\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tess_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a41d740f0accccdfb245d34d554122116" kindref="member">unichar_string</ref>().<ref refid="class_s_t_r_i_n_g_1a32beee43ecab1bed8bebc3466896ad6e" kindref="member">string</ref>(),</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cube_best-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a41d740f0accccdfb245d34d554122116" kindref="member">unichar_string</ref>().<ref refid="class_s_t_r_i_n_g_1a32beee43ecab1bed8bebc3466896ad6e" kindref="member">string</ref>());</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/>tess_word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a67c3636375afdd8b132a31c3aad526de" kindref="member">ConsumeWordResults</ref>(cube_word);</highlight></codeline>
<codeline lineno="358"><highlight class="normal">}</highlight></codeline>
<codeline lineno="359"><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="361"><highlight class="comment"><sp/>*<sp/>cube_recognize</highlight></codeline>
<codeline lineno="362"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="363"><highlight class="comment"><sp/>*<sp/>Call<sp/>cube<sp/>on<sp/>the<sp/>current<sp/>word,<sp/>and<sp/>write<sp/>the<sp/>result<sp/>to<sp/>word.</highlight></codeline>
<codeline lineno="364"><highlight class="comment"><sp/>*<sp/>Sets<sp/>up<sp/>a<sp/>fake<sp/>result<sp/>and<sp/>returns<sp/>false<sp/>if<sp/>something<sp/>goes<sp/>wrong.</highlight></codeline>
<codeline lineno="365"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_1ab675d07d57447f0d598c70ee4b5558bf" kindref="member">Tesseract::cube_recognize</ref>(CubeObject<sp/>*cube_obj,<sp/><ref refid="class_b_l_o_c_k" kindref="compound">BLOCK</ref>*<sp/>block,</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_w_e_r_d___r_e_s" kindref="compound">WERD_RES</ref><sp/>*word)<sp/>{</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a87395e885f187f07e7c906e3e9c3d51e" kindref="member">SetupForCubeRecognition</ref>(unicharset,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>block))<sp/>{</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;<sp/><sp/></highlight><highlight class="comment">//<sp/>Graphics<sp/>block.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Run<sp/>cube</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/>WordAltList<sp/>*cube_alt_list<sp/>=<sp/>cube_obj-&gt;RecognizeWord();</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!cube_alt_list<sp/>||<sp/>cube_alt_list-&gt;AltCount()<sp/>&lt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>returned<sp/>nothing<sp/>for<sp/>word<sp/>at:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1afc15fa7c1b5ad55d6772dea0d6865df1" kindref="member">word</ref>-&gt;<ref refid="class_w_e_r_d_1a151bbfb39ecdef93ab1a14b0f9e4ac74" kindref="member">bounding_box</ref>().<ref refid="class_t_b_o_x_1a2e753aa9943276301d68e9f9cad99620" kindref="member">print</ref>();</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a32f407a6bcc00a06118e83ec0531475a" kindref="member">SetupFake</ref>(unicharset);</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>cube&apos;s<sp/>best<sp/>result<sp/>and<sp/>its<sp/>probability,<sp/>mapped<sp/>to<sp/>tesseract&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>certainty<sp/>range</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><ref refid="namespacetesseract_1aea2c6172b0ca77907e29cd018595b425" kindref="member">char_32</ref><sp/>*cube_best_32<sp/>=<sp/>cube_alt_list-&gt;Alt(0);</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>cube_prob<sp/>=<sp/><ref refid="classtesseract_1_1_cube_utils_1abe90a391bde5178077826ef3dc574d1d" kindref="member">CubeUtils::Cost2Prob</ref>(cube_alt_list-&gt;AltCost(0));</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cube_certainty<sp/>=<sp/>convert_prob_to_tess_certainty(cube_prob);</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>cube_best_str;</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_cube_utils_1a30c20693fc79e49a67c9694700f1d0b5" kindref="member">CubeUtils::UTF32ToUTF8</ref>(cube_best_32,<sp/>&amp;cube_best_str);</highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Retrieve<sp/>Cube&apos;s<sp/>character<sp/>bounding<sp/>boxes<sp/>and<sp/>CharSamples,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>corresponding<sp/>to<sp/>the<sp/>most<sp/>recent<sp/>call<sp/>to<sp/>RecognizeWord().</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/>Boxa<sp/>*char_boxes<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/>CharSamp<sp/>**char_samples<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;;</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>num_chars;</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classtesseract_1_1_tesseract_1a2e3c28addfd0b71c35f3b2b44c5f300a" kindref="member">extract_cube_state</ref>(cube_obj,<sp/>&amp;num_chars,<sp/>&amp;char_boxes,<sp/>&amp;char_samples)</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>WARNING<sp/>(Tesseract::cube_recognize):<sp/>Cannot<sp/>extract<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;cube<sp/>state.\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a32f407a6bcc00a06118e83ec0531475a" kindref="member">SetupFake</ref>(unicharset);</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Convert<sp/>cube&apos;s<sp/>character<sp/>bounding<sp/>boxes<sp/>to<sp/>a<sp/>BoxWord.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/>BoxWord<sp/>cube_box_word;</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>tess_word_box<sp/>=<sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1afc15fa7c1b5ad55d6772dea0d6865df1" kindref="member">word</ref>-&gt;<ref refid="class_w_e_r_d_1a151bbfb39ecdef93ab1a14b0f9e4ac74" kindref="member">bounding_box</ref>();</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a202d9d5d2a462d84012011c689e16605" kindref="member">denorm</ref>.<ref refid="class_d_e_n_o_r_m_1aa6fdb529be1b3d0ce4849989e7d8a72f" kindref="member">block</ref>()<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/>tess_word_box.<ref refid="class_t_b_o_x_1a428e14544aeb44064bc8637d920211a0" kindref="member">rotate</ref>(word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a202d9d5d2a462d84012011c689e16605" kindref="member">denorm</ref>.<ref refid="class_d_e_n_o_r_m_1aa6fdb529be1b3d0ce4849989e7d8a72f" kindref="member">block</ref>()-&gt;<ref refid="class_b_l_o_c_k_1a820d5ff979ad26219ad3914551d70881" kindref="member">re_rotation</ref>());</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>box_word_success<sp/>=<sp/><ref refid="classtesseract_1_1_tesseract_1af74e0ab752d3f52ba97019167549217e" kindref="member">create_cube_box_word</ref>(char_boxes,<sp/>num_chars,</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tess_word_box,</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;cube_box_word);</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/>boxaDestroy(&amp;char_boxes);</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!box_word_success)<sp/>{</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>WARNING<sp/>(Tesseract::cube_recognize):<sp/>Could<sp/>not<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;create<sp/>cube<sp/>BoxWord\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a32f407a6bcc00a06118e83ec0531475a" kindref="member">SetupFake</ref>(unicharset);</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Create<sp/>cube&apos;s<sp/>best<sp/>choice.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><ref refid="class_w_e_r_d___c_h_o_i_c_e" kindref="compound">WERD_CHOICE</ref>*<sp/>cube_werd_choice<sp/>=<sp/>create_werd_choice(</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>char_samples,<sp/>num_chars,<sp/>cube_best_str.c_str(),<sp/>cube_certainty,</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_c_c_util_1a69c5179ac5f10a24f3f97e16ca09460f" kindref="member">unicharset</ref>,<sp/>cube_cntxt_-&gt;<ref refid="classtesseract_1_1_cube_reco_context_1ab9c6b5f85ef4baa38ad8ef9c949b8dee" kindref="member">CharacterSet</ref>());</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>[]char_samples;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!cube_werd_choice)<sp/>{</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>WARNING<sp/>(Tesseract::cube_recognize):<sp/>Could<sp/>not<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;create<sp/>cube<sp/>WERD_CHOICE\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/>word-&gt;<ref refid="class_w_e_r_d___r_e_s_1a32f407a6bcc00a06118e83ec0531475a" kindref="member">SetupFake</ref>(unicharset);</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cube_debug_level<sp/>||<sp/>classify_debug_level)<sp/>{</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="tprintf_8cpp_1a91c3e3cd802b72db376635e0e989a4b0" kindref="member">tprintf</ref>(</highlight><highlight class="stringliteral">&quot;Cube<sp/>result:<sp/>%s<sp/>r=%g,<sp/>c=%g\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cube_werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a41d740f0accccdfb245d34d554122116" kindref="member">unichar_string</ref>().<ref refid="class_s_t_r_i_n_g_1a32beee43ecab1bed8bebc3466896ad6e" kindref="member">string</ref>(),</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cube_werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a52ea24dcb5ff15ad8aee3fd774622216" kindref="member">rating</ref>(),</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cube_werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a1b25ef2b44d21a7204483a7ca804f293" kindref="member">certainty</ref>());</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="442"><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Fill<sp/>tesseract<sp/>result&apos;s<sp/>fields<sp/>with<sp/>cube<sp/>results</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_tesseract_1a6fa87b720aa74a9cd783ed234fa54201" kindref="member">fill_werd_res</ref>(cube_box_word,<sp/>cube_werd_choice,<sp/>cube_best_str.c_str(),<sp/>word);</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="446"><highlight class="normal">}</highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="449"><highlight class="comment"><sp/>*<sp/>fill_werd_res</highlight></codeline>
<codeline lineno="450"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="451"><highlight class="comment"><sp/>*<sp/>Fill<sp/>Tesseract&apos;s<sp/>word<sp/>result<sp/>fields<sp/>with<sp/>cube&apos;s.</highlight></codeline>
<codeline lineno="452"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="453"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_tesseract_1a6fa87b720aa74a9cd783ed234fa54201" kindref="member">Tesseract::fill_werd_res</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>BoxWord&amp;<sp/>cube_box_word,</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_w_e_r_d___c_h_o_i_c_e" kindref="compound">WERD_CHOICE</ref>*<sp/>cube_werd_choice,</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>cube_best_str,</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_w_e_r_d___r_e_s" kindref="compound">WERD_RES</ref>*<sp/>tess_werd_res)<sp/>{</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Replace<sp/>tesseract<sp/>results&apos;s<sp/>best<sp/>choice<sp/>with<sp/>cube&apos;s</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3d42ac7ec121263e757c9b7160dfd50d" kindref="member">best_choice</ref><sp/>=<sp/>cube_werd_choice;</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1ab4d02a7548dab0a4522f02ed90e48100" kindref="member">raw_choice</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_w_e_r_d___c_h_o_i_c_e" kindref="compound">WERD_CHOICE</ref>(*cube_werd_choice);</highlight></codeline>
<codeline lineno="461"><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3a92c8c9750d78631d75998f008f366a" kindref="member">box_word</ref>;</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3a92c8c9750d78631d75998f008f366a" kindref="member">box_word</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>BoxWord(cube_box_word);</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3a92c8c9750d78631d75998f008f366a" kindref="member">box_word</ref>-&gt;<ref refid="classtesseract_1_1_box_word_1af74a52ee479f2e2172b5fb15d680f9fa" kindref="member">ClipToOriginalWord</ref>(tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a202d9d5d2a462d84012011c689e16605" kindref="member">denorm</ref>.<ref refid="class_d_e_n_o_r_m_1aa6fdb529be1b3d0ce4849989e7d8a72f" kindref="member">block</ref>(),</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1afc15fa7c1b5ad55d6772dea0d6865df1" kindref="member">word</ref>);</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Fill<sp/>text<sp/>and<sp/>remaining<sp/>fields</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1afc15fa7c1b5ad55d6772dea0d6865df1" kindref="member">word</ref>-&gt;<ref refid="class_w_e_r_d_1a5decd0b33533bf908c26ad4b10336fb0" kindref="member">set_text</ref>(cube_best_str);</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1ae15f8f88b29e06811c9f821b9fb4af1f" kindref="member">tess_failed</ref><sp/>=<sp/><ref refid="capi_8h_1aa93f0eb578d23995850d61f7d61c55c1" kindref="member">FALSE</ref>;</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1aa5509c182ff49d19cd95cd720ddf4d1a" kindref="member">tess_accepted</ref><sp/>=</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_tesseract_1ac1e1b5cf4240502c521d438d67039823" kindref="member">tess_acceptable_word</ref>(tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3d42ac7ec121263e757c9b7160dfd50d" kindref="member">best_choice</ref>,</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1ab4d02a7548dab0a4522f02ed90e48100" kindref="member">raw_choice</ref>);</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>There<sp/>is<sp/>no<sp/>output<sp/>word,<sp/>so<sp/>we<sp/>can&apos;<sp/>call<sp/>AdaptableWord,<sp/>but<sp/>then<sp/>I<sp/>don&apos;t</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>think<sp/>we<sp/>need<sp/>to.<sp/>Fudge<sp/>the<sp/>result<sp/>with<sp/>accepted.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1ad78596ae5c32eb2806f2e5acc61115a4" kindref="member">tess_would_adapt</ref><sp/>=<sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1aa5509c182ff49d19cd95cd720ddf4d1a" kindref="member">tess_accepted</ref>;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Initialize<sp/>the<sp/>reject_map<sp/>and<sp/>set<sp/>it<sp/>to<sp/>done,<sp/>i.e.,<sp/>ignore<sp/>all<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>tesseract&apos;s<sp/>tests<sp/>for<sp/>rejection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1ae24eb58be06cf275aee411d947fd31ef" kindref="member">reject_map</ref>.<ref refid="class_r_e_j_m_a_p_1a487e7d5d02b1fd1e142578ab4614f05b" kindref="member">initialise</ref>(cube_werd_choice-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a7be59abe97b052dd3aaa324aea8c4a6c" kindref="member">length</ref>());</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a0920859a03bd9b0da26b8a0657d5440d" kindref="member">done</ref><sp/>=<sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1aa5509c182ff49d19cd95cd720ddf4d1a" kindref="member">tess_accepted</ref>;</highlight></codeline>
<codeline lineno="480"><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Some<sp/>sanity<sp/>checks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><ref refid="errcode_8h_1a93a603f4063a6b9403d81caa245a583b" kindref="member">ASSERT_HOST</ref>(tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3d42ac7ec121263e757c9b7160dfd50d" kindref="member">best_choice</ref>-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a7be59abe97b052dd3aaa324aea8c4a6c" kindref="member">length</ref>()<sp/>==</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3d42ac7ec121263e757c9b7160dfd50d" kindref="member">best_choice</ref>-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a4c443d01fbb5fcf092f002091d6f78c2" kindref="member">blob_choices</ref>()-&gt;length());</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><ref refid="errcode_8h_1a93a603f4063a6b9403d81caa245a583b" kindref="member">ASSERT_HOST</ref>(tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1a3d42ac7ec121263e757c9b7160dfd50d" kindref="member">best_choice</ref>-&gt;<ref refid="class_w_e_r_d___c_h_o_i_c_e_1a7be59abe97b052dd3aaa324aea8c4a6c" kindref="member">length</ref>()<sp/>==</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tess_werd_res-&gt;<ref refid="class_w_e_r_d___r_e_s_1ae24eb58be06cf275aee411d947fd31ef" kindref="member">reject_map</ref>.<ref refid="class_r_e_j_m_a_p_1ab3760d96d63b5ca6c4bfeb32ffc8183c" kindref="member">length</ref>());</highlight></codeline>
<codeline lineno="486"><highlight class="normal">}</highlight></codeline>
<codeline lineno="487"><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>tesseract</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/Users/makoto/Desktop/trunk/ccmain/cube_control.cpp"/>
  </compounddef>
</doxygen>
