<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.4">
  <compounddef id="scanedg_8cpp" kind="file">
    <compoundname>scanedg.cpp</compoundname>
    <includes refid="mfcpch_8h" local="yes">mfcpch.h</includes>
    <includes refid="edgloop_8h" local="yes">edgloop.h</includes>
    <includes refid="scanedg_8h" local="yes">scanedg.h</includes>
    <incdepgraph>
      <node id="39078">
        <label>mfcpch.h</label>
        <link refid="mfcpch_8h"/>
      </node>
      <node id="39092">
        <label>ndminx.h</label>
        <link refid="ndminx_8h"/>
      </node>
      <node id="39084">
        <label>stdlib.h</label>
      </node>
      <node id="39087">
        <label>platform.h</label>
        <link refid="platform_8h"/>
        <childnode refid="39088" relation="include">
        </childnode>
      </node>
      <node id="39115">
        <label>blckerr.h</label>
        <link refid="blckerr_8h"/>
        <childnode refid="39089" relation="include">
        </childnode>
      </node>
      <node id="39080">
        <label>scrollview.h</label>
        <link refid="scrollview_8h"/>
        <childnode refid="39081" relation="include">
        </childnode>
      </node>
      <node id="39099">
        <label>serialis.h</label>
        <link refid="serialis_8h"/>
        <childnode refid="39084" relation="include">
        </childnode>
        <childnode refid="39091" relation="include">
        </childnode>
        <childnode refid="39081" relation="include">
        </childnode>
        <childnode refid="39094" relation="include">
        </childnode>
        <childnode refid="39089" relation="include">
        </childnode>
        <childnode refid="39100" relation="include">
        </childnode>
      </node>
      <node id="39098">
        <label>clst.h</label>
        <link refid="clst_8h"/>
        <childnode refid="39081" relation="include">
        </childnode>
        <childnode refid="39086" relation="include">
        </childnode>
        <childnode refid="39099" relation="include">
        </childnode>
        <childnode refid="39101" relation="include">
        </childnode>
      </node>
      <node id="39095">
        <label>stddef.h</label>
      </node>
      <node id="39077">
        <label>textord/scanedg.cpp</label>
        <link refid="scanedg.cpp"/>
        <childnode refid="39078" relation="include">
        </childnode>
        <childnode refid="39079" relation="include">
        </childnode>
        <childnode refid="39116" relation="include">
        </childnode>
      </node>
      <node id="39089">
        <label>errcode.h</label>
        <link refid="errcode_8h"/>
        <childnode refid="39086" relation="include">
        </childnode>
      </node>
      <node id="39116">
        <label>scanedg.h</label>
        <link refid="scanedg_8h"/>
        <childnode refid="39082" relation="include">
        </childnode>
        <childnode refid="39080" relation="include">
        </childnode>
        <childnode refid="39096" relation="include">
        </childnode>
        <childnode refid="39097" relation="include">
        </childnode>
        <childnode refid="39112" relation="include">
        </childnode>
      </node>
      <node id="39102">
        <label>polyblk.h</label>
        <link refid="polyblk_8h"/>
        <childnode refid="39103" relation="include">
        </childnode>
        <childnode refid="39104" relation="include">
        </childnode>
        <childnode refid="39105" relation="include">
        </childnode>
        <childnode refid="39108" relation="include">
        </childnode>
        <childnode refid="39080" relation="include">
        </childnode>
        <childnode refid="39110" relation="include">
        </childnode>
      </node>
      <node id="39088">
        <label>limits.h</label>
      </node>
      <node id="39107">
        <label>ipoints.h</label>
        <link refid="ipoints_8h"/>
        <childnode refid="39106" relation="include">
        </childnode>
      </node>
      <node id="39113">
        <label>mod128.h</label>
        <link refid="mod128_8h"/>
        <childnode refid="39105" relation="include">
        </childnode>
      </node>
      <node id="39079">
        <label>edgloop.h</label>
        <link refid="edgloop_8h"/>
        <childnode refid="39080" relation="include">
        </childnode>
        <childnode refid="39082" relation="include">
        </childnode>
        <childnode refid="39096" relation="include">
        </childnode>
        <childnode refid="39097" relation="include">
        </childnode>
        <childnode refid="39111" relation="include">
        </childnode>
        <childnode refid="39112" relation="include">
        </childnode>
      </node>
      <node id="39091">
        <label>string.h</label>
      </node>
      <node id="39108">
        <label>rect.h</label>
        <link refid="rect_8h"/>
        <childnode refid="39106" relation="include">
        </childnode>
        <childnode refid="39105" relation="include">
        </childnode>
        <childnode refid="39092" relation="include">
        </childnode>
        <childnode refid="39080" relation="include">
        </childnode>
        <childnode refid="39109" relation="include">
        </childnode>
      </node>
      <node id="39114">
        <label>bits16.h</label>
        <link refid="bits16_8h"/>
        <childnode refid="39086" relation="include">
        </childnode>
      </node>
      <node id="39085">
        <label>tesscallback.h</label>
        <link refid="tesscallback_8h"/>
        <childnode refid="39086" relation="include">
        </childnode>
      </node>
      <node id="39111">
        <label>coutln.h</label>
        <link refid="coutln_8h"/>
        <childnode refid="39112" relation="include">
        </childnode>
        <childnode refid="39113" relation="include">
        </childnode>
        <childnode refid="39114" relation="include">
        </childnode>
        <childnode refid="39108" relation="include">
        </childnode>
        <childnode refid="39115" relation="include">
        </childnode>
        <childnode refid="39080" relation="include">
        </childnode>
      </node>
      <node id="39100">
        <label>fileerr.h</label>
        <link refid="fileerr_8h"/>
        <childnode refid="39089" relation="include">
        </childnode>
      </node>
      <node id="39112">
        <label>crakedge.h</label>
        <link refid="crakedge_8h"/>
        <childnode refid="39105" relation="include">
        </childnode>
        <childnode refid="39113" relation="include">
        </childnode>
      </node>
      <node id="39106">
        <label>math.h</label>
      </node>
      <node id="39101">
        <label>lsterr.h</label>
        <link refid="lsterr_8h"/>
        <childnode refid="39089" relation="include">
        </childnode>
      </node>
      <node id="39103">
        <label>publictypes.h</label>
        <link refid="publictypes_8h"/>
      </node>
      <node id="39082">
        <label>params.h</label>
        <link refid="params_8h"/>
        <childnode refid="39081" relation="include">
        </childnode>
        <childnode refid="39083" relation="include">
        </childnode>
        <childnode refid="39093" relation="include">
        </childnode>
      </node>
      <node id="39083">
        <label>genericvector.h</label>
        <link refid="genericvector_8h"/>
        <childnode refid="39081" relation="include">
        </childnode>
        <childnode refid="39084" relation="include">
        </childnode>
        <childnode refid="39085" relation="include">
        </childnode>
        <childnode refid="39089" relation="include">
        </childnode>
        <childnode refid="39090" relation="include">
        </childnode>
        <childnode refid="39092" relation="include">
        </childnode>
      </node>
      <node id="39094">
        <label>memry.h</label>
        <link refid="memry_8h"/>
        <childnode refid="39095" relation="include">
        </childnode>
        <childnode refid="39086" relation="include">
        </childnode>
      </node>
      <node id="39104">
        <label>elst.h</label>
        <link refid="elst_8h"/>
        <childnode refid="39081" relation="include">
        </childnode>
        <childnode refid="39086" relation="include">
        </childnode>
        <childnode refid="39099" relation="include">
        </childnode>
        <childnode refid="39101" relation="include">
        </childnode>
      </node>
      <node id="39105">
        <label>points.h</label>
        <link refid="points_8h"/>
        <childnode refid="39081" relation="include">
        </childnode>
        <childnode refid="39106" relation="include">
        </childnode>
        <childnode refid="39104" relation="include">
        </childnode>
        <childnode refid="39107" relation="include">
        </childnode>
      </node>
      <node id="39096">
        <label>img.h</label>
        <link refid="img_8h"/>
        <childnode refid="39094" relation="include">
        </childnode>
      </node>
      <node id="39109">
        <label>tprintf.h</label>
        <link refid="tprintf_8h"/>
        <childnode refid="39082" relation="include">
        </childnode>
      </node>
      <node id="39110">
        <label>hpddef.h</label>
        <link refid="hpddef_8h"/>
      </node>
      <node id="39086">
        <label>host.h</label>
        <link refid="host_8h"/>
        <childnode refid="39087" relation="include">
        </childnode>
      </node>
      <node id="39097">
        <label>pdblock.h</label>
        <link refid="pdblock_8h"/>
        <childnode refid="39098" relation="include">
        </childnode>
        <childnode refid="39096" relation="include">
        </childnode>
        <childnode refid="39093" relation="include">
        </childnode>
        <childnode refid="39102" relation="include">
        </childnode>
        <childnode refid="39110" relation="include">
        </childnode>
      </node>
      <node id="39081">
        <label>stdio.h</label>
      </node>
      <node id="39093">
        <label>strngs.h</label>
        <link refid="strngs_8h"/>
        <childnode refid="39081" relation="include">
        </childnode>
        <childnode refid="39091" relation="include">
        </childnode>
        <childnode refid="39087" relation="include">
        </childnode>
        <childnode refid="39094" relation="include">
        </childnode>
      </node>
      <node id="39090">
        <label>helpers.h</label>
        <link refid="helpers_8h"/>
        <childnode refid="39081" relation="include">
        </childnode>
        <childnode refid="39091" relation="include">
        </childnode>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="scanedg_8cpp_1a5c91c3924c21f1e24a333317e8d08a74" prot="public" static="no">
        <name>WHITE_PIX</name>
        <initializer>1          /*thresholded colours */</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="24" column="9" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="24" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="scanedg_8cpp_1a31503e4b0f23137edefe782ad5632878" prot="public" static="no">
        <name>BLACK_PIX</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="25" column="9" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="25" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="scanedg_8cpp_1a29f11db4ed3af442549b1de233ac4739" prot="public" static="no">
        <name>FLIP_COLOUR</name>
        <param><defname>pix</defname></param>
        <initializer>(1-(pix))</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="27" column="9" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="27" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="scanedg_8cpp_1a7828e79362811e3054815de5c8a81b75" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void block_edges</definition>
        <argsstring>(IMAGE *t_image, PDBLK *block, C_OUTLINE_IT *outline_it)</argsstring>
        <name>block_edges</name>
        <param>
          <type><ref refid="class_i_m_a_g_e" kindref="compound">IMAGE</ref> *</type>
          <declname>t_image</declname>
        </param>
        <param>
          <type><ref refid="class_p_d_b_l_k" kindref="compound">PDBLK</ref> *</type>
          <declname>block</declname>
        </param>
        <param>
          <type>C_OUTLINE_IT *</type>
          <declname>outline_it</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="35" column="1" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="35" bodyend="78"/>
      </memberdef>
      <memberdef kind="function" id="scanedg_8cpp_1a7265d5ee56fbab9229a8f39e28d38458" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void make_margins</definition>
        <argsstring>(PDBLK *block, BLOCK_LINE_IT *line_it, uinT8 *pixels, uinT8 margin, inT16 left, inT16 right, inT16 y)</argsstring>
        <name>make_margins</name>
        <param>
          <type><ref refid="class_p_d_b_l_k" kindref="compound">PDBLK</ref> *</type>
          <declname>block</declname>
        </param>
        <param>
          <type><ref refid="class_b_l_o_c_k___l_i_n_e___i_t" kindref="compound">BLOCK_LINE_IT</ref> *</type>
          <declname>line_it</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref> *</type>
          <declname>pixels</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref></type>
          <declname>margin</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref></type>
          <declname>left</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref></type>
          <declname>right</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref></type>
          <declname>y</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="87" column="1" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="87" bodyend="136"/>
      </memberdef>
      <memberdef kind="function" id="scanedg_8cpp_1a98c58c8e07b0ed6c4b7b56fe6a49d9cd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void whiteout_block</definition>
        <argsstring>(IMAGE *t_image, PDBLK *block)</argsstring>
        <name>whiteout_block</name>
        <param>
          <type><ref refid="class_i_m_a_g_e" kindref="compound">IMAGE</ref> *</type>
          <declname>t_image</declname>
        </param>
        <param>
          <type><ref refid="class_p_d_b_l_k" kindref="compound">PDBLK</ref> *</type>
          <declname>block</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="145" column="1" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="145" bodyend="168"/>
      </memberdef>
      <memberdef kind="function" id="scanedg_8cpp_1ab24d6aa53a42392537afadfb6333b489" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void line_edges</definition>
        <argsstring>(inT16 x, inT16 y, inT16 xext, uinT8 uppercolour, uinT8 *bwpos, CRACKEDGE **prevline, CRACKEDGE **free_cracks, C_OUTLINE_IT *outline_it)</argsstring>
        <name>line_edges</name>
        <param>
          <type><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref></type>
          <declname>x</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref></type>
          <declname>y</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref></type>
          <declname>xext</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref></type>
          <declname>uppercolour</declname>
        </param>
        <param>
          <type><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref> *</type>
          <declname>bwpos</declname>
        </param>
        <param>
          <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> **</type>
          <declname>prevline</declname>
        </param>
        <param>
          <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> **</type>
          <declname>free_cracks</declname>
        </param>
        <param>
          <type>C_OUTLINE_IT *</type>
          <declname>outline_it</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="178" column="1" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="178" bodyend="253"/>
      </memberdef>
      <memberdef kind="function" id="scanedg_8cpp_1a06f8ee398cd3556fc0d40c5decd25745" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> *</type>
        <definition>CRACKEDGE* h_edge</definition>
        <argsstring>(int sign, CRACKEDGE *join, CrackPos *pos)</argsstring>
        <name>h_edge</name>
        <param>
          <type>int</type>
          <declname>sign</declname>
        </param>
        <param>
          <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> *</type>
          <declname>join</declname>
        </param>
        <param>
          <type><ref refid="struct_crack_pos" kindref="compound">CrackPos</ref> *</type>
          <declname>pos</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="262" column="1" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="262" bodyend="304"/>
      </memberdef>
      <memberdef kind="function" id="scanedg_8cpp_1a9f6f7cf3af410407129ae07523fde0db" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> *</type>
        <definition>CRACKEDGE* v_edge</definition>
        <argsstring>(int sign, CRACKEDGE *join, CrackPos *pos)</argsstring>
        <name>v_edge</name>
        <param>
          <type>int</type>
          <declname>sign</declname>
        </param>
        <param>
          <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> *</type>
          <declname>join</declname>
        </param>
        <param>
          <type><ref refid="struct_crack_pos" kindref="compound">CrackPos</ref> *</type>
          <declname>pos</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="313" column="1" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="313" bodyend="355"/>
      </memberdef>
      <memberdef kind="function" id="scanedg_8cpp_1a6e23861c825d8a8e48c8b26d75e0b715" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void join_edges</definition>
        <argsstring>(CRACKEDGE *edge1, CRACKEDGE *edge2, CRACKEDGE **free_cracks, C_OUTLINE_IT *outline_it)</argsstring>
        <name>join_edges</name>
        <param>
          <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> *</type>
          <declname>edge1</declname>
        </param>
        <param>
          <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> *</type>
          <declname>edge2</declname>
        </param>
        <param>
          <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> **</type>
          <declname>free_cracks</declname>
        </param>
        <param>
          <type>C_OUTLINE_IT *</type>
          <declname>outline_it</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="365" column="1" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="365" bodyend="389"/>
      </memberdef>
      <memberdef kind="function" id="scanedg_8cpp_1a19b3430c0ac6e770e54b8b52a9a991c5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void free_crackedges</definition>
        <argsstring>(CRACKEDGE *start)</argsstring>
        <name>free_crackedges</name>
        <param>
          <type><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref> *</type>
          <declname>start</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" line="398" column="1" bodyfile="/Users/makoto/Desktop/trunk/textord/scanedg.cpp" bodystart="398" bodyend="406"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>File:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scanedg.c<sp/><sp/>(Formerly<sp/>scanedge.c)</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Description:<sp/>Raster<sp/>scanning<sp/>crack<sp/>based<sp/>edge<sp/>extractor.</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>Author:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Ray<sp/>Smith</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>Created:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Fri<sp/>Mar<sp/>22<sp/>16:11:50<sp/>GMT<sp/>1991</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>(C)<sp/>Copyright<sp/>1991,<sp/>Hewlett-Packard<sp/>Ltd.</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>**<sp/>Licensed<sp/>under<sp/>the<sp/>Apache<sp/>License,<sp/>Version<sp/>2.0<sp/>(the<sp/>&quot;License&quot;);</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>**<sp/>you<sp/>may<sp/>not<sp/>use<sp/>this<sp/>file<sp/>except<sp/>in<sp/>compliance<sp/>with<sp/>the<sp/>License.</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>**<sp/>You<sp/>may<sp/>obtain<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>License<sp/>at</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>**<sp/>http://www.apache.org/licenses/LICENSE-2.0</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>**<sp/>Unless<sp/>required<sp/>by<sp/>applicable<sp/>law<sp/>or<sp/>agreed<sp/>to<sp/>in<sp/>writing,<sp/>software</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>**<sp/>distributed<sp/>under<sp/>the<sp/>License<sp/>is<sp/>distributed<sp/>on<sp/>an<sp/>&quot;AS<sp/>IS&quot;<sp/>BASIS,</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>**<sp/>WITHOUT<sp/>WARRANTIES<sp/>OR<sp/>CONDITIONS<sp/>OF<sp/>ANY<sp/>KIND,<sp/>either<sp/>express<sp/>or<sp/>implied.</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>**<sp/>See<sp/>the<sp/>License<sp/>for<sp/>the<sp/>specific<sp/>language<sp/>governing<sp/>permissions<sp/>and</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>**<sp/>limitations<sp/>under<sp/>the<sp/>License.</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="mfcpch_8h" kindref="compound">mfcpch.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;<ref refid="edgloop_8h" kindref="compound">edgloop.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;<ref refid="scanedg_8h" kindref="compound">scanedg.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>WHITE_PIX<sp/><sp/><sp/><sp/><sp/>1<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*thresholded<sp/>colours<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="25"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>BLACK_PIX<sp/><sp/><sp/><sp/><sp/>0</highlight></codeline>
<codeline lineno="26"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*W-&gt;B-&gt;W<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FLIP_COLOUR(pix)<sp/><sp/>(1-(pix))</highlight></codeline>
<codeline lineno="28"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*<sp/>block_edges</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/>*<sp/>Extract<sp/>edges<sp/>from<sp/>a<sp/>PDBLK.</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="scanedg_8cpp_1a7828e79362811e3054815de5c8a81b75" kindref="member">block_edges</ref>(<ref refid="class_i_m_a_g_e" kindref="compound">IMAGE</ref><sp/>*t_image,<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>thresholded<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_p_d_b_l_k" kindref="compound" tooltip="page block ">PDBLK</ref><sp/>*block,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>block<sp/>in<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C_OUTLINE_IT*<sp/>outline_it)<sp/>{</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref><sp/>margin;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>margin<sp/>colour</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>x;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>line<sp/>coords</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>y;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>current<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>bleft;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>bounding<sp/>box</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>tright;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>block_bleft;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>bounding<sp/>box</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>block_tright;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>xindex;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>index<sp/>to<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><ref refid="class_b_l_o_c_k___l_i_n_e___i_t" kindref="compound" tooltip="rectangle iterator ">BLOCK_LINE_IT</ref><sp/>line_it<sp/>=<sp/>block;<sp/></highlight><highlight class="comment">//<sp/>line<sp/>iterator</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><ref refid="class_i_m_a_g_e_l_i_n_e" kindref="compound">IMAGELINE</ref><sp/>bwline;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>thresholded<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>lines<sp/>in<sp/>progress</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>**ptrline<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref>*[t_image-&gt;<ref refid="class_i_m_a_g_e_1aee6f16416203f7d678fc61ae22dedc6e" kindref="member">get_xsize</ref>()+1];</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*free_cracks<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/>block-&gt;<ref refid="class_p_d_b_l_k_1a91950a96127b4a0bb9b237e1f5f889a4" kindref="member" tooltip="get box ">bounding_box</ref>(bleft,<sp/>tright);<sp/><sp/></highlight><highlight class="comment">//<sp/>block<sp/>box</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/>block_bleft<sp/>=<sp/>bleft;</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/>block_tright<sp/>=<sp/>tright;</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(x<sp/>=<sp/>tright.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>();<sp/>x<sp/>&gt;=<sp/>0;<sp/>x--)</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/>ptrline[x]<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//no<sp/>lines<sp/>in<sp/>progress</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/>bwline.<ref refid="class_i_m_a_g_e_l_i_n_e_1a4cc90adaaa649d7fd24b35f57c517b7c" kindref="member">init</ref>(t_image-&gt;<ref refid="class_i_m_a_g_e_1aee6f16416203f7d678fc61ae22dedc6e" kindref="member">get_xsize</ref>());</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/>margin<sp/>=<sp/><ref refid="scanedg_8cpp_1a5c91c3924c21f1e24a333317e8d08a74" kindref="member">WHITE_PIX</ref>;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(y<sp/>=<sp/>tright.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>-<sp/>1;<sp/>y<sp/>&gt;=<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>-<sp/>1;<sp/>y--)<sp/>{</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(y<sp/>&gt;=<sp/>block_bleft.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>&amp;&amp;<sp/>y<sp/>&lt;<sp/>block_tright.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>{</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>t_image-&gt;<ref refid="class_i_m_a_g_e_1ad3cdcd971f7c3089a0eb3b6ea968018b" kindref="member">get_line</ref>(bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>(),<sp/>y,<sp/>tright.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>(),<sp/>&amp;bwline,<sp/>0);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="scanedg_8cpp_1a7265d5ee56fbab9229a8f39e28d38458" kindref="member">make_margins</ref>(block,<sp/>&amp;line_it,<sp/>bwline.<ref refid="class_i_m_a_g_e_l_i_n_e_1a0bf967eba44b6352a126f74c1a057172" kindref="member" tooltip="image pixels ">pixels</ref>,<sp/>margin,<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>(),</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tright.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>(),<sp/>y);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>x<sp/>=<sp/>tright.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>();</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(xindex<sp/>=<sp/>0;<sp/>xindex<sp/>&lt;<sp/>x;<sp/>xindex++)</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bwline.<ref refid="class_i_m_a_g_e_l_i_n_e_1a0bf967eba44b6352a126f74c1a057172" kindref="member" tooltip="image pixels ">pixels</ref>[xindex]<sp/>=<sp/>margin;</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="scanedg_8cpp_1ab24d6aa53a42392537afadfb6333b489" kindref="member">line_edges</ref>(bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>(),<sp/>y,<sp/>tright.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>(),</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>margin,<sp/>bwline.<ref refid="class_i_m_a_g_e_l_i_n_e_1a0bf967eba44b6352a126f74c1a057172" kindref="member" tooltip="image pixels ">pixels</ref>,<sp/>ptrline,<sp/>&amp;free_cracks,<sp/>outline_it);</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><ref refid="scanedg_8cpp_1a19b3430c0ac6e770e54b8b52a9a991c5" kindref="member">free_crackedges</ref>(free_cracks);<sp/><sp/></highlight><highlight class="comment">//<sp/>really<sp/>free<sp/>them</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal">[]<sp/>ptrline;</highlight></codeline>
<codeline lineno="78"><highlight class="normal">}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="82"><highlight class="comment"><sp/>*<sp/>make_margins</highlight></codeline>
<codeline lineno="83"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="84"><highlight class="comment"><sp/>*<sp/>Get<sp/>an<sp/>image<sp/>line<sp/>and<sp/>set<sp/>to<sp/>margin<sp/>non-text<sp/>pixels.</highlight></codeline>
<codeline lineno="85"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="scanedg_8cpp_1a7265d5ee56fbab9229a8f39e28d38458" kindref="member">make_margins</ref>(<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//get<sp/>a<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_p_d_b_l_k" kindref="compound" tooltip="page block ">PDBLK</ref><sp/>*block,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//block<sp/>in<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_b_l_o_c_k___l_i_n_e___i_t" kindref="compound" tooltip="rectangle iterator ">BLOCK_LINE_IT</ref><sp/>*line_it,<sp/><sp/></highlight><highlight class="comment">//for<sp/>old<sp/>style</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref><sp/>*pixels,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//pixels<sp/>to<sp/>strip</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref><sp/>margin,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//white-out<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>left,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//block<sp/>edges</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>right,</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>y<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//line<sp/>coord</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><ref refid="class_p_b___l_i_n_e___i_t" kindref="compound">PB_LINE_IT</ref><sp/>*lines;</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/>ICOORDELT_LIST<sp/>*segments;<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//bits<sp/>of<sp/>a<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/>ICOORDELT_IT<sp/>seg_it;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1aba1f582fd0168f3ff9225d8c90fa9eb8" kindref="member">inT32</ref><sp/>start;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//of<sp/>segment</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>xext;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//of<sp/>segment</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>xindex;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//index<sp/>to<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(block-&gt;<ref refid="class_p_d_b_l_k_1a6670779c69aca2d574e4a0590d9b3939" kindref="member">poly_block</ref><sp/>()<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/>lines<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_p_b___l_i_n_e___i_t" kindref="compound">PB_LINE_IT</ref><sp/>(block-&gt;<ref refid="class_p_d_b_l_k_1a6670779c69aca2d574e4a0590d9b3939" kindref="member">poly_block</ref><sp/>());</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>segments<sp/>=<sp/>lines-&gt;<ref refid="class_p_b___l_i_n_e___i_t_1a951f496eedaed0deb3e61946f7444122" kindref="member">get_line</ref><sp/>(y);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!segments-&gt;empty<sp/>())<sp/>{</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>seg_it.set_to_list<sp/>(segments);</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>seg_it.mark_cycle_pt<sp/>();</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>start<sp/>=<sp/>seg_it.data<sp/>()-&gt;x<sp/>();</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xext<sp/>=<sp/>seg_it.data<sp/>()-&gt;y<sp/>();</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(xindex<sp/>=<sp/>left;<sp/>xindex<sp/>&lt;<sp/>right;<sp/>xindex++)<sp/>{</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(xindex<sp/>&gt;=<sp/>start<sp/>&amp;&amp;<sp/>!seg_it.cycled_list<sp/>())<sp/>{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xindex<sp/>=<sp/>start<sp/>+<sp/>xext<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>seg_it.forward<sp/>();</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>start<sp/>=<sp/>seg_it.data<sp/>()-&gt;x<sp/>();</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xext<sp/>=<sp/>seg_it.data<sp/>()-&gt;y<sp/>();</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pixels[xindex<sp/>-<sp/>left]<sp/>=<sp/>margin;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(xindex<sp/>=<sp/>left;<sp/>xindex<sp/>&lt;<sp/>right;<sp/>xindex++)</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pixels[xindex<sp/>-<sp/>left]<sp/>=<sp/>margin;</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>segments;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>lines;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>start<sp/>=<sp/>line_it-&gt;<ref refid="class_b_l_o_c_k___l_i_n_e___i_t_1acb41ad4c1ece0af796b3551d5ad6dd8c" kindref="member">get_line</ref><sp/>(y,<sp/>xext);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(xindex<sp/>=<sp/>left;<sp/>xindex<sp/>&lt;<sp/>start;<sp/>xindex++)</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pixels[xindex<sp/>-<sp/>left]<sp/>=<sp/>margin;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(xindex<sp/>=<sp/>start<sp/>+<sp/>xext;<sp/>xindex<sp/>&lt;<sp/>right;<sp/>xindex++)</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pixels[xindex<sp/>-<sp/>left]<sp/>=<sp/>margin;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="136"><highlight class="normal">}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="140"><highlight class="comment"><sp/>*<sp/>whiteout_block</highlight></codeline>
<codeline lineno="141"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="142"><highlight class="comment"><sp/>*<sp/>Extract<sp/>edges<sp/>from<sp/>a<sp/>PDBLK.</highlight></codeline>
<codeline lineno="143"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="scanedg_8cpp_1a98c58c8e07b0ed6c4b7b56fe6a49d9cd" kindref="member">whiteout_block</ref>(<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//clean<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_i_m_a_g_e" kindref="compound">IMAGE</ref><sp/>*t_image,<sp/><sp/></highlight><highlight class="comment">//threshold<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_p_d_b_l_k" kindref="compound" tooltip="page block ">PDBLK</ref><sp/>*block<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//block<sp/>in<sp/>image</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)<sp/>{</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>x;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//line<sp/>coords</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>y;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//current<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>xext;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//line<sp/>width</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>xindex;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//index<sp/>to<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref><sp/>*dest;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//destination<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>block_box;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//bounding<sp/>box</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><ref refid="class_b_l_o_c_k___l_i_n_e___i_t" kindref="compound" tooltip="rectangle iterator ">BLOCK_LINE_IT</ref><sp/>line_it<sp/>=<sp/>block;<sp/></highlight><highlight class="comment">//line<sp/>iterator</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><ref refid="class_i_m_a_g_e_l_i_n_e" kindref="compound">IMAGELINE</ref><sp/>bwline;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//thresholded<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/>block_box<sp/>=<sp/>block-&gt;<ref refid="class_p_d_b_l_k_1a91950a96127b4a0bb9b237e1f5f889a4" kindref="member" tooltip="get box ">bounding_box</ref><sp/>();</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(y<sp/>=<sp/>block_box.<ref refid="class_t_b_o_x_1a4451d237f1cd18c4982d63fe36a11fc3" kindref="member">bottom</ref><sp/>();<sp/>y<sp/>&lt;<sp/>block_box.<ref refid="class_t_b_o_x_1adf92e9fdac1bdf11c10d1c4d1178791a" kindref="member">top</ref><sp/>();<sp/>y++)<sp/>{</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//find<sp/>line<sp/>limits</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/>x<sp/>=<sp/>line_it.<ref refid="class_b_l_o_c_k___l_i_n_e___i_t_1acb41ad4c1ece0af796b3551d5ad6dd8c" kindref="member">get_line</ref><sp/>(y,<sp/>xext);</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/>t_image-&gt;<ref refid="class_i_m_a_g_e_1ad3cdcd971f7c3089a0eb3b6ea968018b" kindref="member">get_line</ref><sp/>(x,<sp/>y,<sp/>xext,<sp/>&amp;bwline,<sp/>0);</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/>dest<sp/>=<sp/>bwline.<ref refid="class_i_m_a_g_e_l_i_n_e_1a0bf967eba44b6352a126f74c1a057172" kindref="member" tooltip="image pixels ">pixels</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//destination<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(xindex<sp/>=<sp/>0;<sp/>xindex<sp/>&lt;<sp/>xext;<sp/>xindex++)</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*dest++<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>t_image-&gt;<ref refid="class_i_m_a_g_e_1afbea9591218792f2be5e805a77ee167d" kindref="member">put_line</ref><sp/>(x,<sp/>y,<sp/>xext,<sp/>&amp;bwline,<sp/>0);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="168"><highlight class="normal">}</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="172"><highlight class="comment"><sp/>*<sp/>line_edges</highlight></codeline>
<codeline lineno="173"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="174"><highlight class="comment"><sp/>*<sp/>Scan<sp/>a<sp/>line<sp/>for<sp/>edges<sp/>and<sp/>update<sp/>the<sp/>edges<sp/>in<sp/>progress.</highlight></codeline>
<codeline lineno="175"><highlight class="comment"><sp/>*<sp/>When<sp/>edges<sp/>close<sp/>into<sp/>loops,<sp/>send<sp/>them<sp/>for<sp/>approximation.</highlight></codeline>
<codeline lineno="176"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="scanedg_8cpp_1ab24d6aa53a42392537afadfb6333b489" kindref="member">line_edges</ref>(<ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>x,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>coord<sp/>of<sp/>line<sp/>start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>y,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>coord<sp/>of<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a8d41499d38c24d39b221ab0c158fe5a8" kindref="member">inT16</ref><sp/>xext,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>width<sp/>of<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref><sp/>uppercolour,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>start<sp/>of<sp/>prev<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="host_8h_1a458fe97f82495945f8071bb3c18d1783" kindref="member">uinT8</ref><sp/>*<sp/>bwpos,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>thresholded<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>**<sp/>prevline,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>edges<sp/>in<sp/>progress</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>**free_cracks,</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C_OUTLINE_IT*<sp/>outline_it)<sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><ref refid="struct_crack_pos" kindref="compound">CrackPos</ref><sp/>pos<sp/>=<sp/>{free_cracks,<sp/>x,<sp/>y<sp/>};</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>xmax;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>max<sp/>x<sp/>coord</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>colour;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>of<sp/>current<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>prevcolour;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>of<sp/>previous<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*current;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>current<sp/>h<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*newcurrent;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>new<sp/>h<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/>xmax<sp/>=<sp/>x<sp/>+<sp/>xext;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>max<sp/>allowable<sp/>coord</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/>prevcolour<sp/>=<sp/>uppercolour;<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>forced<sp/>plain<sp/>margin</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/>current<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>nothing<sp/>yet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>do<sp/>each<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(;<sp/>pos.<ref refid="struct_crack_pos_1a152fb63ed25f1545f1d10a1a80466bd4" kindref="member">x</ref><sp/>&lt;<sp/>xmax;<sp/>pos.<ref refid="struct_crack_pos_1a152fb63ed25f1545f1d10a1a80466bd4" kindref="member">x</ref>++,<sp/>prevline++)<sp/>{</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/>colour<sp/>=<sp/>*bwpos++;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>current<sp/>pixel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*prevline<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>changed<sp/>above</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>change<sp/>colour</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>uppercolour<sp/>=<sp/><ref refid="scanedg_8cpp_1a29f11db4ed3af442549b1de233ac4739" kindref="member">FLIP_COLOUR</ref>(uppercolour);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(colour<sp/>==<sp/>prevcolour)<sp/>{</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(colour<sp/>==<sp/>uppercolour)<sp/>{</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>finish<sp/>a<sp/>line</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="scanedg_8cpp_1a6e23861c825d8a8e48c8b26d75e0b715" kindref="member">join_edges</ref>(current,<sp/>*prevline,<sp/>free_cracks,<sp/>outline_it);</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>current<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>no<sp/>edge<sp/>now</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>new<sp/>horiz<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>current<sp/>=<sp/><ref refid="scanedg_8cpp_1a06f8ee398cd3556fc0d40c5decd25745" kindref="member">h_edge</ref>(uppercolour<sp/>-<sp/>colour,<sp/>*prevline,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*prevline<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>no<sp/>change<sp/>this<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(colour<sp/>==<sp/>uppercolour)</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*prevline<sp/>=<sp/><ref refid="scanedg_8cpp_1a9f6f7cf3af410407129ae07523fde0db" kindref="member">v_edge</ref>(colour<sp/>-<sp/>prevcolour,<sp/>*prevline,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>8<sp/>vs<sp/>4<sp/>connection</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(colour<sp/>==<sp/><ref refid="scanedg_8cpp_1a5c91c3924c21f1e24a333317e8d08a74" kindref="member">WHITE_PIX</ref>)<sp/>{</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="scanedg_8cpp_1a6e23861c825d8a8e48c8b26d75e0b715" kindref="member">join_edges</ref>(current,<sp/>*prevline,<sp/>free_cracks,<sp/>outline_it);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>current<sp/>=<sp/><ref refid="scanedg_8cpp_1a06f8ee398cd3556fc0d40c5decd25745" kindref="member">h_edge</ref>(uppercolour<sp/>-<sp/>colour,<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*prevline<sp/>=<sp/><ref refid="scanedg_8cpp_1a9f6f7cf3af410407129ae07523fde0db" kindref="member">v_edge</ref>(colour<sp/>-<sp/>prevcolour,<sp/>current,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>newcurrent<sp/>=<sp/><ref refid="scanedg_8cpp_1a06f8ee398cd3556fc0d40c5decd25745" kindref="member">h_edge</ref>(uppercolour<sp/>-<sp/>colour,<sp/>*prevline,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*prevline<sp/>=<sp/><ref refid="scanedg_8cpp_1a9f6f7cf3af410407129ae07523fde0db" kindref="member">v_edge</ref>(colour<sp/>-<sp/>prevcolour,<sp/>current,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>current<sp/>=<sp/>newcurrent;<sp/><sp/></highlight><highlight class="comment">//<sp/>right<sp/>going<sp/>h<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prevcolour<sp/>=<sp/>colour;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>remember<sp/>new<sp/>colour</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(colour<sp/>!=<sp/>prevcolour)<sp/>{</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*prevline<sp/>=<sp/>current<sp/>=<sp/><ref refid="scanedg_8cpp_1a9f6f7cf3af410407129ae07523fde0db" kindref="member">v_edge</ref>(colour<sp/>-<sp/>prevcolour,<sp/>current,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prevcolour<sp/>=<sp/>colour;</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(colour<sp/>!=<sp/>uppercolour)</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>current<sp/>=<sp/><ref refid="scanedg_8cpp_1a06f8ee398cd3556fc0d40c5decd25745" kindref="member">h_edge</ref>(uppercolour<sp/>-<sp/>colour,<sp/>current,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>current<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>no<sp/>edge<sp/>now</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(current<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>out<sp/>of<sp/>block</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*prevline<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>got<sp/>one<sp/>to<sp/>join<sp/>to?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="scanedg_8cpp_1a6e23861c825d8a8e48c8b26d75e0b715" kindref="member">join_edges</ref>(current,<sp/>*prevline,<sp/>free_cracks,<sp/>outline_it);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*prevline<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>tidy<sp/>now</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>fake<sp/>vertical</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>*prevline<sp/>=<sp/><ref refid="scanedg_8cpp_1a9f6f7cf3af410407129ae07523fde0db" kindref="member">v_edge</ref>(<ref refid="scanedg_8cpp_1a29f11db4ed3af442549b1de233ac4739" kindref="member">FLIP_COLOUR</ref>(prevcolour)-prevcolour,<sp/>current,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*prevline<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//continue<sp/>fake</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/>*prevline<sp/>=<sp/><ref refid="scanedg_8cpp_1a9f6f7cf3af410407129ae07523fde0db" kindref="member">v_edge</ref>(<ref refid="scanedg_8cpp_1a29f11db4ed3af442549b1de233ac4739" kindref="member">FLIP_COLOUR</ref>(prevcolour)-prevcolour,<sp/>*prevline,<sp/>&amp;pos);</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="253"><highlight class="normal">}</highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="257"><highlight class="comment"><sp/>*<sp/>h_edge</highlight></codeline>
<codeline lineno="258"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="259"><highlight class="comment"><sp/>*<sp/>Create<sp/>a<sp/>new<sp/>horizontal<sp/>CRACKEDGE<sp/>and<sp/>join<sp/>it<sp/>to<sp/>the<sp/>given<sp/>edge.</highlight></codeline>
<codeline lineno="260"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*<ref refid="scanedg_8cpp_1a06f8ee398cd3556fc0d40c5decd25745" kindref="member">h_edge</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>sign,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>sign<sp/>of<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref>*<sp/><ref refid="oldlist_8cpp_1a185e827874145ed10ce9db702a34f671" kindref="member">join</ref>,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>edge<sp/>to<sp/>join<sp/>to</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_crack_pos" kindref="compound">CrackPos</ref>*<sp/>pos)<sp/>{</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*newpt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>return<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*pos-&gt;<ref refid="struct_crack_pos_1ad0f5bf625d55d94e09e5a5f4e920461e" kindref="member">free_cracks</ref><sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt<sp/>=<sp/>*pos-&gt;<ref refid="struct_crack_pos_1ad0f5bf625d55d94e09e5a5f4e920461e" kindref="member">free_cracks</ref>;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/>*pos-&gt;<ref refid="struct_crack_pos_1ad0f5bf625d55d94e09e5a5f4e920461e" kindref="member">free_cracks</ref><sp/>=<sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>one<sp/>fast</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref>;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1aa9fb418d1c602c0533e426759da43d67" kindref="member" tooltip="rewrite function ">set_y</ref>(pos-&gt;<ref refid="struct_crack_pos_1a71d7e214daf3a1ce26ee03037a0f0caf" kindref="member">y</ref><sp/>+<sp/>1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>coords<sp/>of<sp/>pt</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a25eed9381f5de431869fd4d61fdbd15d" kindref="member">stepy</ref><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>edge<sp/>is<sp/>horizontal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sign<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a94c586039b3a003b35cf659b33b938f3" kindref="member" tooltip="rewrite function ">set_x</ref>(pos-&gt;<ref refid="struct_crack_pos_1a152fb63ed25f1545f1d10a1a80466bd4" kindref="member">x</ref><sp/>+<sp/>1);<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>start<sp/>location</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a907cb1dc30d54151b7bd96a8ab90f207" kindref="member">stepx</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a9d7eda07653a7c0831d92630a1668dc3" kindref="member">stepdir</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a94c586039b3a003b35cf659b33b938f3" kindref="member" tooltip="rewrite function ">set_x</ref>(pos-&gt;<ref refid="struct_crack_pos_1a152fb63ed25f1545f1d10a1a80466bd4" kindref="member">x</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>start<sp/>location</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a907cb1dc30d54151b7bd96a8ab90f207" kindref="member">stepx</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a9d7eda07653a7c0831d92630a1668dc3" kindref="member">stepdir</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(join<sp/>==<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>newpt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ptrs<sp/>to<sp/>other<sp/>ends</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>+<sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a907cb1dc30d54151b7bd96a8ab90f207" kindref="member">stepx</ref><sp/>==<sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>==<sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>{</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>update<sp/>other<sp/>ends</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref>-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/><ref refid="oldlist_8cpp_1a185e827874145ed10ce9db702a34f671" kindref="member">join</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>join<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>update<sp/>other<sp/>ends</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/><ref refid="oldlist_8cpp_1a185e827874145ed10ce9db702a34f671" kindref="member">join</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>join<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>newpt;</highlight></codeline>
<codeline lineno="304"><highlight class="normal">}</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="308"><highlight class="comment"><sp/>*<sp/>v_edge</highlight></codeline>
<codeline lineno="309"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="310"><highlight class="comment"><sp/>*<sp/>Create<sp/>a<sp/>new<sp/>vertical<sp/>CRACKEDGE<sp/>and<sp/>join<sp/>it<sp/>to<sp/>the<sp/>given<sp/>edge.</highlight></codeline>
<codeline lineno="311"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*<ref refid="scanedg_8cpp_1a9f6f7cf3af410407129ae07523fde0db" kindref="member">v_edge</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>sign,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>sign<sp/>of<sp/>edge</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref>*<sp/>join,</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct_crack_pos" kindref="compound">CrackPos</ref>*<sp/>pos)<sp/>{</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*newpt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>return<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*pos-&gt;<ref refid="struct_crack_pos_1ad0f5bf625d55d94e09e5a5f4e920461e" kindref="member">free_cracks</ref><sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt<sp/>=<sp/>*pos-&gt;<ref refid="struct_crack_pos_1ad0f5bf625d55d94e09e5a5f4e920461e" kindref="member">free_cracks</ref>;</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/>*pos-&gt;<ref refid="struct_crack_pos_1ad0f5bf625d55d94e09e5a5f4e920461e" kindref="member">free_cracks</ref><sp/>=<sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>get<sp/>one<sp/>fast</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref>;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a94c586039b3a003b35cf659b33b938f3" kindref="member" tooltip="rewrite function ">set_x</ref>(pos-&gt;<ref refid="struct_crack_pos_1a152fb63ed25f1545f1d10a1a80466bd4" kindref="member">x</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>coords<sp/>of<sp/>pt</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a907cb1dc30d54151b7bd96a8ab90f207" kindref="member">stepx</ref><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>edge<sp/>is<sp/>vertical</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sign<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1aa9fb418d1c602c0533e426759da43d67" kindref="member" tooltip="rewrite function ">set_y</ref>(pos-&gt;<ref refid="struct_crack_pos_1a71d7e214daf3a1ce26ee03037a0f0caf" kindref="member">y</ref>);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>start<sp/>location</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a25eed9381f5de431869fd4d61fdbd15d" kindref="member">stepy</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a9d7eda07653a7c0831d92630a1668dc3" kindref="member">stepdir</ref><sp/>=<sp/>3;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1aa9fb418d1c602c0533e426759da43d67" kindref="member" tooltip="rewrite function ">set_y</ref>(pos-&gt;<ref refid="struct_crack_pos_1a71d7e214daf3a1ce26ee03037a0f0caf" kindref="member">y</ref><sp/>+<sp/>1);<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>start<sp/>location</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a25eed9381f5de431869fd4d61fdbd15d" kindref="member">stepy</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a9d7eda07653a7c0831d92630a1668dc3" kindref="member">stepdir</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(join<sp/>==<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>newpt;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//ptrs<sp/>to<sp/>other<sp/>ends</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>==<sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>+<sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a25eed9381f5de431869fd4d61fdbd15d" kindref="member">stepy</ref><sp/>==<sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>{</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>update<sp/>other<sp/>ends</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref>-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/><ref refid="oldlist_8cpp_1a185e827874145ed10ce9db702a34f671" kindref="member">join</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>join<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>;<sp/><sp/></highlight><highlight class="comment">//<sp/>update<sp/>other<sp/>ends</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>newpt-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/><ref refid="oldlist_8cpp_1a185e827874145ed10ce9db702a34f671" kindref="member">join</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>join<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>join-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>newpt;</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>newpt;</highlight></codeline>
<codeline lineno="355"><highlight class="normal">}</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="359"><highlight class="comment"><sp/>*<sp/>join_edges</highlight></codeline>
<codeline lineno="360"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="361"><highlight class="comment"><sp/>*<sp/>Join<sp/>2<sp/>edges<sp/>together.<sp/>Send<sp/>the<sp/>outline<sp/>for<sp/>approximation<sp/>when<sp/>a</highlight></codeline>
<codeline lineno="362"><highlight class="comment"><sp/>*<sp/>closed<sp/>loop<sp/>is<sp/>formed.</highlight></codeline>
<codeline lineno="363"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="scanedg_8cpp_1a6e23861c825d8a8e48c8b26d75e0b715" kindref="member">join_edges</ref>(<ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*edge1,<sp/><sp/></highlight><highlight class="comment">//<sp/>edges<sp/>to<sp/>join</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*edge2,<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>no<sp/>specific<sp/>order</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>**free_cracks,</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>C_OUTLINE_IT*<sp/>outline_it)<sp/>{</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>+<sp/>edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a907cb1dc30d54151b7bd96a8ab90f207" kindref="member">stepx</ref><sp/>!=<sp/>edge2-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/>||<sp/>edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>+<sp/>edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a25eed9381f5de431869fd4d61fdbd15d" kindref="member">stepy</ref><sp/>!=<sp/>edge2-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1ae7bcdb1f6f28f612a0ff4ace03b38165" kindref="member">pos</ref>.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>{</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*tempedge<sp/>=<sp/>edge1;</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/>edge1<sp/>=<sp/>edge2;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>swap<sp/>araound</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/>edge2<sp/>=<sp/>tempedge;</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>==<sp/>edge2)<sp/>{</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>already<sp/>closed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="edgloop_8cpp_1affa66849c6f718f217c84b000407944b" kindref="member">complete_edge</ref>(edge1,<sp/>outline_it);</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>attach<sp/>freelist<sp/>to<sp/>end</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/>edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref>-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>*free_cracks;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/>*free_cracks<sp/>=<sp/>edge1;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>free<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>update<sp/>opposite<sp/>ends</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/>edge2-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref>-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/>edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>edge2-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref>;</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/>edge1-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref><sp/>=<sp/>edge2;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>make<sp/>joins</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/>edge2-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a22411a30eb2b7529ccb755dc3971b0d1" kindref="member">prev</ref><sp/>=<sp/>edge1;</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="389"><highlight class="normal">}</highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight><highlight class="comment">/**********************************************************************</highlight></codeline>
<codeline lineno="393"><highlight class="comment"><sp/>*<sp/>free_crackedges</highlight></codeline>
<codeline lineno="394"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="395"><highlight class="comment"><sp/>*<sp/>Really<sp/>free<sp/>the<sp/>CRACKEDGEs<sp/>by<sp/>giving<sp/>them<sp/>back<sp/>to<sp/>delete.</highlight></codeline>
<codeline lineno="396"><highlight class="comment"><sp/>**********************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="397"><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="scanedg_8cpp_1a19b3430c0ac6e770e54b8b52a9a991c5" kindref="member">free_crackedges</ref>(<ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*start)<sp/>{</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*current;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>current<sp/>edge<sp/>to<sp/>free</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><ref refid="class_c_r_a_c_k_e_d_g_e" kindref="compound">CRACKEDGE</ref><sp/>*next;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>next<sp/>one<sp/>to<sp/>free</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(current<sp/>=<sp/>start;<sp/>current<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;<sp/>current<sp/>=<sp/>next)<sp/>{</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/>next<sp/>=<sp/>current-&gt;<ref refid="class_c_r_a_c_k_e_d_g_e_1a65662bdae2f4b5a3b670791fa6d6d44a" kindref="member">next</ref>;</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>current;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>delete<sp/>them<sp/>all</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="406"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/Users/makoto/Desktop/trunk/textord/scanedg.cpp"/>
  </compounddef>
</doxygen>
