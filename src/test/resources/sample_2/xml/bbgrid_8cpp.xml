<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.4">
  <compounddef id="bbgrid_8cpp" kind="file">
    <compoundname>bbgrid.cpp</compoundname>
    <includes refid="bbgrid_8h" local="yes">bbgrid.h</includes>
    <includes refid="helpers_8h" local="yes">helpers.h</includes>
    <includes refid="ocrblock_8h" local="yes">ocrblock.h</includes>
    <incdepgraph>
      <node id="36551">
        <label>ndminx.h</label>
        <link refid="ndminx_8h"/>
      </node>
      <node id="36528">
        <label>bbgrid.h</label>
        <link refid="bbgrid_8h"/>
        <childnode refid="36529" relation="include">
        </childnode>
        <childnode refid="36542" relation="include">
        </childnode>
        <childnode refid="36550" relation="include">
        </childnode>
        <childnode refid="36552" relation="include">
        </childnode>
        <childnode refid="36560" relation="include">
        </childnode>
      </node>
      <node id="36535">
        <label>stdlib.h</label>
      </node>
      <node id="36532">
        <label>platform.h</label>
        <link refid="platform_8h"/>
        <childnode refid="36533" relation="include">
        </childnode>
      </node>
      <node id="36559">
        <label>blckerr.h</label>
        <link refid="blckerr_8h"/>
        <childnode refid="36539" relation="include">
        </childnode>
      </node>
      <node id="36560">
        <label>allheaders.h</label>
      </node>
      <node id="36552">
        <label>scrollview.h</label>
        <link refid="scrollview_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
      </node>
      <node id="36534">
        <label>serialis.h</label>
        <link refid="serialis_8h"/>
        <childnode refid="36535" relation="include">
        </childnode>
        <childnode refid="36536" relation="include">
        </childnode>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36537" relation="include">
        </childnode>
        <childnode refid="36539" relation="include">
        </childnode>
        <childnode refid="36540" relation="include">
        </childnode>
      </node>
      <node id="36529">
        <label>clst.h</label>
        <link refid="clst_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36531" relation="include">
        </childnode>
        <childnode refid="36534" relation="include">
        </childnode>
        <childnode refid="36541" relation="include">
        </childnode>
      </node>
      <node id="36570">
        <label>stepblob.h</label>
        <link refid="stepblob_8h"/>
        <childnode refid="36542" relation="include">
        </childnode>
        <childnode refid="36550" relation="include">
        </childnode>
      </node>
      <node id="36538">
        <label>stddef.h</label>
      </node>
      <node id="36539">
        <label>errcode.h</label>
        <link refid="errcode_8h"/>
        <childnode refid="36531" relation="include">
        </childnode>
      </node>
      <node id="36572">
        <label>polyblk.h</label>
        <link refid="polyblk_8h"/>
        <childnode refid="36564" relation="include">
        </childnode>
        <childnode refid="36546" relation="include">
        </childnode>
        <childnode refid="36544" relation="include">
        </childnode>
        <childnode refid="36550" relation="include">
        </childnode>
        <childnode refid="36552" relation="include">
        </childnode>
        <childnode refid="36573" relation="include">
        </childnode>
      </node>
      <node id="36533">
        <label>limits.h</label>
      </node>
      <node id="36547">
        <label>ipoints.h</label>
        <link refid="ipoints_8h"/>
        <childnode refid="36545" relation="include">
        </childnode>
      </node>
      <node id="36548">
        <label>mod128.h</label>
        <link refid="mod128_8h"/>
        <childnode refid="36544" relation="include">
        </childnode>
      </node>
      <node id="36569">
        <label>elst2.h</label>
        <link refid="elst2_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36531" relation="include">
        </childnode>
        <childnode refid="36534" relation="include">
        </childnode>
        <childnode refid="36541" relation="include">
        </childnode>
      </node>
      <node id="36536">
        <label>string.h</label>
      </node>
      <node id="36550">
        <label>rect.h</label>
        <link refid="rect_8h"/>
        <childnode refid="36545" relation="include">
        </childnode>
        <childnode refid="36544" relation="include">
        </childnode>
        <childnode refid="36551" relation="include">
        </childnode>
        <childnode refid="36552" relation="include">
        </childnode>
        <childnode refid="36553" relation="include">
        </childnode>
      </node>
      <node id="36549">
        <label>bits16.h</label>
        <link refid="bits16_8h"/>
        <childnode refid="36531" relation="include">
        </childnode>
      </node>
      <node id="36556">
        <label>tesscallback.h</label>
        <link refid="tesscallback_8h"/>
        <childnode refid="36531" relation="include">
        </childnode>
      </node>
      <node id="36542">
        <label>coutln.h</label>
        <link refid="coutln_8h"/>
        <childnode refid="36543" relation="include">
        </childnode>
        <childnode refid="36548" relation="include">
        </childnode>
        <childnode refid="36549" relation="include">
        </childnode>
        <childnode refid="36550" relation="include">
        </childnode>
        <childnode refid="36559" relation="include">
        </childnode>
        <childnode refid="36552" relation="include">
        </childnode>
      </node>
      <node id="36568">
        <label>werd.h</label>
        <link refid="werd_8h"/>
        <childnode refid="36554" relation="include">
        </childnode>
        <childnode refid="36549" relation="include">
        </childnode>
        <childnode refid="36569" relation="include">
        </childnode>
        <childnode refid="36558" relation="include">
        </childnode>
        <childnode refid="36559" relation="include">
        </childnode>
        <childnode refid="36570" relation="include">
        </childnode>
        <childnode refid="36565" relation="include">
        </childnode>
      </node>
      <node id="36565">
        <label>ocrrow.h</label>
        <link refid="ocrrow_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36566" relation="include">
        </childnode>
        <childnode refid="36568" relation="include">
        </childnode>
      </node>
      <node id="36540">
        <label>fileerr.h</label>
        <link refid="fileerr_8h"/>
        <childnode refid="36539" relation="include">
        </childnode>
      </node>
      <node id="36545">
        <label>math.h</label>
      </node>
      <node id="36543">
        <label>crakedge.h</label>
        <link refid="crakedge_8h"/>
        <childnode refid="36544" relation="include">
        </childnode>
        <childnode refid="36548" relation="include">
        </childnode>
      </node>
      <node id="36541">
        <label>lsterr.h</label>
        <link refid="lsterr_8h"/>
        <childnode refid="36539" relation="include">
        </childnode>
      </node>
      <node id="36567">
        <label>quadratc.h</label>
        <link refid="quadratc_8h"/>
        <childnode refid="36544" relation="include">
        </childnode>
      </node>
      <node id="36564">
        <label>publictypes.h</label>
        <link refid="publictypes_8h"/>
      </node>
      <node id="36561">
        <label>ocrblock.h</label>
        <link refid="ocrblock_8h"/>
        <childnode refid="36562" relation="include">
        </childnode>
        <childnode refid="36563" relation="include">
        </childnode>
        <childnode refid="36565" relation="include">
        </childnode>
        <childnode refid="36571" relation="include">
        </childnode>
      </node>
      <node id="36554">
        <label>params.h</label>
        <link refid="params_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36555" relation="include">
        </childnode>
        <childnode refid="36558" relation="include">
        </childnode>
      </node>
      <node id="36555">
        <label>genericvector.h</label>
        <link refid="genericvector_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36535" relation="include">
        </childnode>
        <childnode refid="36556" relation="include">
        </childnode>
        <childnode refid="36539" relation="include">
        </childnode>
        <childnode refid="36557" relation="include">
        </childnode>
        <childnode refid="36551" relation="include">
        </childnode>
      </node>
      <node id="36537">
        <label>memry.h</label>
        <link refid="memry_8h"/>
        <childnode refid="36538" relation="include">
        </childnode>
        <childnode refid="36531" relation="include">
        </childnode>
      </node>
      <node id="36563">
        <label>ocrpara.h</label>
        <link refid="ocrpara_8h"/>
        <childnode refid="36564" relation="include">
        </childnode>
        <childnode refid="36546" relation="include">
        </childnode>
        <childnode refid="36558" relation="include">
        </childnode>
      </node>
      <node id="36546">
        <label>elst.h</label>
        <link refid="elst_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36531" relation="include">
        </childnode>
        <childnode refid="36534" relation="include">
        </childnode>
        <childnode refid="36541" relation="include">
        </childnode>
      </node>
      <node id="36544">
        <label>points.h</label>
        <link refid="points_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36545" relation="include">
        </childnode>
        <childnode refid="36546" relation="include">
        </childnode>
        <childnode refid="36547" relation="include">
        </childnode>
      </node>
      <node id="36562">
        <label>img.h</label>
        <link refid="img_8h"/>
        <childnode refid="36537" relation="include">
        </childnode>
      </node>
      <node id="36553">
        <label>tprintf.h</label>
        <link refid="tprintf_8h"/>
        <childnode refid="36554" relation="include">
        </childnode>
      </node>
      <node id="36573">
        <label>hpddef.h</label>
        <link refid="hpddef_8h"/>
      </node>
      <node id="36531">
        <label>host.h</label>
        <link refid="host_8h"/>
        <childnode refid="36532" relation="include">
        </childnode>
      </node>
      <node id="36571">
        <label>pdblock.h</label>
        <link refid="pdblock_8h"/>
        <childnode refid="36529" relation="include">
        </childnode>
        <childnode refid="36562" relation="include">
        </childnode>
        <childnode refid="36558" relation="include">
        </childnode>
        <childnode refid="36572" relation="include">
        </childnode>
        <childnode refid="36573" relation="include">
        </childnode>
      </node>
      <node id="36530">
        <label>stdio.h</label>
      </node>
      <node id="36558">
        <label>strngs.h</label>
        <link refid="strngs_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36536" relation="include">
        </childnode>
        <childnode refid="36532" relation="include">
        </childnode>
        <childnode refid="36537" relation="include">
        </childnode>
      </node>
      <node id="36557">
        <label>helpers.h</label>
        <link refid="helpers_8h"/>
        <childnode refid="36530" relation="include">
        </childnode>
        <childnode refid="36536" relation="include">
        </childnode>
      </node>
      <node id="36566">
        <label>quspline.h</label>
        <link refid="quspline_8h"/>
        <childnode refid="36567" relation="include">
        </childnode>
        <childnode refid="36534" relation="include">
        </childnode>
        <childnode refid="36537" relation="include">
        </childnode>
        <childnode refid="36550" relation="include">
        </childnode>
      </node>
      <node id="36527">
        <label>textord/bbgrid.cpp</label>
        <link refid="bbgrid.cpp"/>
        <childnode refid="36528" relation="include">
        </childnode>
        <childnode refid="36557" relation="include">
        </childnode>
        <childnode refid="36561" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innernamespace refid="namespacetesseract">tesseract</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//<sp/>File:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bbgrid.cpp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Description:<sp/>Class<sp/>to<sp/>hold<sp/>BLOBNBOXs<sp/>in<sp/>a<sp/>grid<sp/>for<sp/>fast<sp/>access</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>to<sp/>neighbours.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Author:<sp/><sp/><sp/><sp/><sp/><sp/>Ray<sp/>Smith</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Created:<sp/><sp/><sp/><sp/><sp/>Wed<sp/>Jun<sp/>06<sp/>17:22:01<sp/>PDT<sp/>2007</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="comment">//<sp/>(C)<sp/>Copyright<sp/>2007,<sp/>Google<sp/>Inc.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Licensed<sp/>under<sp/>the<sp/>Apache<sp/>License,<sp/>Version<sp/>2.0<sp/>(the<sp/>&quot;License&quot;);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="comment">//<sp/>you<sp/>may<sp/>not<sp/>use<sp/>this<sp/>file<sp/>except<sp/>in<sp/>compliance<sp/>with<sp/>the<sp/>License.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="comment">//<sp/>You<sp/>may<sp/>obtain<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>License<sp/>at</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="comment">//<sp/>http://www.apache.org/licenses/LICENSE-2.0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Unless<sp/>required<sp/>by<sp/>applicable<sp/>law<sp/>or<sp/>agreed<sp/>to<sp/>in<sp/>writing,<sp/>software</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="comment">//<sp/>distributed<sp/>under<sp/>the<sp/>License<sp/>is<sp/>distributed<sp/>on<sp/>an<sp/>&quot;AS<sp/>IS&quot;<sp/>BASIS,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="comment">//<sp/>WITHOUT<sp/>WARRANTIES<sp/>OR<sp/>CONDITIONS<sp/>OF<sp/>ANY<sp/>KIND,<sp/>either<sp/>express<sp/>or<sp/>implied.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="comment">//<sp/>See<sp/>the<sp/>License<sp/>for<sp/>the<sp/>specific<sp/>language<sp/>governing<sp/>permissions<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="comment">//<sp/>limitations<sp/>under<sp/>the<sp/>License.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="comment">//</highlight></codeline>
<codeline lineno="20"><highlight class="comment"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="bbgrid_8h" kindref="compound">bbgrid.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="helpers_8h" kindref="compound">helpers.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ocrblock_8h" kindref="compound">ocrblock.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespacetesseract-c__api-demo_1afed58feacb84df2de88bdd613cfdba6d" kindref="member">tesseract</ref><sp/>{</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="comment">//<sp/>BBGrid<sp/>IMPLEMENTATION.</highlight></codeline>
<codeline lineno="30"><highlight class="comment"></highlight><highlight class="normal"><ref refid="classtesseract_1_1_grid_base_1ac1ea91a905041f0fa896bec740903a77" kindref="member">GridBase::GridBase</ref>()<sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal">}</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><ref refid="classtesseract_1_1_grid_base_1ac1ea91a905041f0fa896bec740903a77" kindref="member">GridBase::GridBase</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>gridsize,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref>&amp;<sp/>bleft,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref>&amp;<sp/>tright)<sp/>{</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a9e23ba0f9d310510c9a2b3a38f11e683" kindref="member">Init</ref>(gridsize,<sp/>bleft,<sp/>tright);</highlight></codeline>
<codeline lineno="35"><highlight class="normal">}</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><ref refid="classtesseract_1_1_grid_base_1a7ee16480a8ca444d7847850ac0115813" kindref="member">GridBase::~GridBase</ref>()<sp/>{</highlight></codeline>
<codeline lineno="38"><highlight class="normal">}</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="comment">//<sp/>(Re)Initialize<sp/>the<sp/>grid.<sp/>The<sp/>gridsize<sp/>is<sp/>the<sp/>size<sp/>in<sp/>pixels<sp/>of<sp/>each<sp/>cell,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="comment">//<sp/>and<sp/>bleft,<sp/>tright<sp/>are<sp/>the<sp/>bounding<sp/>box<sp/>of<sp/>everything<sp/>to<sp/>go<sp/>in<sp/>it.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_grid_base_1a9e23ba0f9d310510c9a2b3a38f11e683" kindref="member">GridBase::Init</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>gridsize,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref>&amp;<sp/>bleft,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref>&amp;<sp/>tright)<sp/>{</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref><sp/>=<sp/><ref refid="classtesseract_1_1_grid_base_1afff2cee730084711205977b5fcb4901e" kindref="member">gridsize</ref>;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a5f09e93ec22c3f7a245eb6611309d8d6" kindref="member">bleft_</ref><sp/>=<sp/><ref refid="classtesseract_1_1_grid_base_1ad20b2cb8eb2bf52871d5260c04949cce" kindref="member">bleft</ref>;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1ac348165d112922b3d956f924405012cd" kindref="member">tright_</ref><sp/>=<sp/><ref refid="classtesseract_1_1_grid_base_1aa94e147841b6a4fae0b28e7e872685a5" kindref="member">tright</ref>;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref><sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a429c00f7b3ea66cfd63a75cfa2c1b43d" kindref="member">gridwidth_</ref><sp/>=<sp/>(tright.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>+<sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref><sp/>-<sp/>1)<sp/>/<sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref>;</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1ae70ca33c0676a296720fea5ddc0aa5cc" kindref="member">gridheight_</ref><sp/>=<sp/>(tright.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>+<sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref><sp/>-<sp/>1)<sp/>/<sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref>;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1adcda3a0efeed2a95fc777fc7127898a6" kindref="member">gridbuckets_</ref><sp/>=<sp/><ref refid="classtesseract_1_1_grid_base_1a429c00f7b3ea66cfd63a75cfa2c1b43d" kindref="member">gridwidth_</ref><sp/>*<sp/><ref refid="classtesseract_1_1_grid_base_1ae70ca33c0676a296720fea5ddc0aa5cc" kindref="member">gridheight_</ref>;</highlight></codeline>
<codeline lineno="51"><highlight class="normal">}</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Compute<sp/>the<sp/>given<sp/>grid<sp/>coordinates<sp/>from<sp/>image<sp/>coords.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_grid_base_1a9cb158bba184d657c51257b98eea9f8f" kindref="member">GridBase::GridCoords</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>grid_x,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>grid_y)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/>*grid_x<sp/>=<sp/>(x<sp/>-<sp/><ref refid="classtesseract_1_1_grid_base_1a5f09e93ec22c3f7a245eb6611309d8d6" kindref="member">bleft_</ref>.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>())<sp/>/<sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref>;</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/>*grid_y<sp/>=<sp/>(y<sp/>-<sp/><ref refid="classtesseract_1_1_grid_base_1a5f09e93ec22c3f7a245eb6611309d8d6" kindref="member">bleft_</ref>.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>/<sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref>;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a6349387c9d98fae34cf247b12cdc5a00" kindref="member">ClipGridCoords</ref>(grid_x,<sp/>grid_y);</highlight></codeline>
<codeline lineno="58"><highlight class="normal">}</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Clip<sp/>the<sp/>given<sp/>grid<sp/>coordinates<sp/>to<sp/>fit<sp/>within<sp/>the<sp/>grid.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_grid_base_1a6349387c9d98fae34cf247b12cdc5a00" kindref="member">GridBase::ClipGridCoords</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>x,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>y)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/>*x<sp/>=<sp/><ref refid="helpers_8h_1af8739168d5b3235996eeb25dac3c4044" kindref="member">ClipToRange</ref>(*x,<sp/>0,<sp/><ref refid="classtesseract_1_1_grid_base_1a429c00f7b3ea66cfd63a75cfa2c1b43d" kindref="member">gridwidth_</ref><sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/>*y<sp/>=<sp/><ref refid="helpers_8h_1af8739168d5b3235996eeb25dac3c4044" kindref="member">ClipToRange</ref>(*y,<sp/>0,<sp/><ref refid="classtesseract_1_1_grid_base_1ae70ca33c0676a296720fea5ddc0aa5cc" kindref="member">gridheight_</ref><sp/>-<sp/>1);</highlight></codeline>
<codeline lineno="64"><highlight class="normal">}</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><ref refid="classtesseract_1_1_int_grid_1ad035d5cf48ebae7e0befe040cd5581ff" kindref="member">IntGrid::IntGrid</ref>()<sp/>{</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/>grid_<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="68"><highlight class="normal">}</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><ref refid="classtesseract_1_1_int_grid_1ad035d5cf48ebae7e0befe040cd5581ff" kindref="member">IntGrid::IntGrid</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>gridsize,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref>&amp;<sp/>bleft,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref>&amp;<sp/>tright)</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/>:<sp/>grid_(<ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)<sp/>{</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_b_b_grid_1a1d2990adf323d7910fbf87b6fc3a7415" kindref="member">Init</ref>(gridsize,<sp/>bleft,<sp/>tright);</highlight></codeline>
<codeline lineno="73"><highlight class="normal">}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><ref refid="classtesseract_1_1_int_grid_1a3d9a594271d2056482c0a12cedcda3d0" kindref="member">IntGrid::~IntGrid</ref>()<sp/>{</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(grid_<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>[]<sp/>grid_;</highlight></codeline>
<codeline lineno="78"><highlight class="normal">}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="comment">//<sp/>(Re)Initialize<sp/>the<sp/>grid.<sp/>The<sp/>gridsize<sp/>is<sp/>the<sp/>size<sp/>in<sp/>pixels<sp/>of<sp/>each<sp/>cell,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="comment">//<sp/>and<sp/>bleft,<sp/>tright<sp/>are<sp/>the<sp/>bounding<sp/>box<sp/>of<sp/>everything<sp/>to<sp/>go<sp/>in<sp/>it.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_int_grid_1a5f8aae7fd3be5e1f041e499906dd057f" kindref="member">IntGrid::Init</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>gridsize,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref>&amp;<sp/>bleft,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref>&amp;<sp/>tright)<sp/>{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a9e23ba0f9d310510c9a2b3a38f11e683" kindref="member">GridBase::Init</ref>(gridsize,<sp/>bleft,<sp/>tright);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(grid_<sp/>!=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>)</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>[]<sp/>grid_;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/>grid_<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">[<ref refid="classtesseract_1_1_grid_base_1adcda3a0efeed2a95fc777fc7127898a6" kindref="member">gridbuckets_</ref>];</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_int_grid_1a46dc23ed91af648648515010a1b1c988" kindref="member">Clear</ref>();</highlight></codeline>
<codeline lineno="88"><highlight class="normal">}</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Clear<sp/>all<sp/>the<sp/>ints<sp/>in<sp/>the<sp/>grid<sp/>to<sp/>zero.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_int_grid_1a46dc23ed91af648648515010a1b1c988" kindref="member">IntGrid::Clear</ref>()<sp/>{</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="classtesseract_1_1_grid_base_1adcda3a0efeed2a95fc777fc7127898a6" kindref="member">gridbuckets_</ref>;<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>grid_[i]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal">}</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Rotate<sp/>the<sp/>grid<sp/>by<sp/>rotation,<sp/>keeping<sp/>cell<sp/>contents.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight><highlight class="comment">//<sp/>rotation<sp/>must<sp/>be<sp/>a<sp/>multiple<sp/>of<sp/>90<sp/>degrees.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight><highlight class="comment">//<sp/>NOTE:<sp/>due<sp/>to<sp/>partial<sp/>cells,<sp/>cell<sp/>coverage<sp/>in<sp/>the<sp/>rotated<sp/>grid<sp/>will<sp/>be</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight><highlight class="comment">//<sp/>inexact.<sp/>This<sp/>is<sp/>why<sp/>there<sp/>is<sp/>no<sp/>Rotate<sp/>for<sp/>the<sp/>generic<sp/>BBGrid.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight><highlight class="comment">//<sp/>TODO(rays)<sp/>investigate<sp/>fixing<sp/>this<sp/>inaccuracy<sp/>by<sp/>moving<sp/>the<sp/>origin<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight><highlight class="comment">//<sp/>rotation.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_int_grid_1ad1389d68ae52483114b995117280db18" kindref="member">IntGrid::Rotate</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_f_c_o_o_r_d" kindref="compound">FCOORD</ref>&amp;<sp/>rotation)<sp/>{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><ref refid="errcode_8h_1a93a603f4063a6b9403d81caa245a583b" kindref="member">ASSERT_HOST</ref>(rotation.<ref refid="class_f_c_o_o_r_d_1a9edadbfc357c730f62fa3c92677b0d58" kindref="member">x</ref>()<sp/>==<sp/>0.0f<sp/>||<sp/>rotation.<ref refid="class_f_c_o_o_r_d_1a397f7ce997b246df18e7bd5a20cc422e" kindref="member">y</ref>()<sp/>==<sp/>0.0f);</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>old_bleft(<ref refid="classtesseract_1_1_grid_base_1ad20b2cb8eb2bf52871d5260c04949cce" kindref="member">bleft</ref>());</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>old_tright(<ref refid="classtesseract_1_1_grid_base_1aa94e147841b6a4fae0b28e7e872685a5" kindref="member">tright</ref>());</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>old_width<sp/>=<sp/><ref refid="classtesseract_1_1_grid_base_1a0a38ea995b9d65f8b67d66d5501a5b80" kindref="member">gridwidth</ref>();</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>old_height<sp/>=<sp/><ref refid="classtesseract_1_1_grid_base_1a07e6b230c150180d009ef1f317e642f2" kindref="member">gridheight</ref>();</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>box(<ref refid="classtesseract_1_1_grid_base_1ad20b2cb8eb2bf52871d5260c04949cce" kindref="member">bleft</ref>(),<sp/><ref refid="classtesseract_1_1_grid_base_1aa94e147841b6a4fae0b28e7e872685a5" kindref="member">tright</ref>());</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/>box.rotate(rotation);</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>old_grid<sp/>=<sp/>grid_;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/>grid_<sp/>=<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_int_grid_1a5f8aae7fd3be5e1f041e499906dd057f" kindref="member">Init</ref>(<ref refid="classtesseract_1_1_grid_base_1afff2cee730084711205977b5fcb4901e" kindref="member">gridsize</ref>(),<sp/>box.botleft(),<sp/>box.topright());</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Iterate<sp/>over<sp/>the<sp/>old<sp/>grid,<sp/>copying<sp/>data<sp/>to<sp/>the<sp/>rotated<sp/>position<sp/>in<sp/>the<sp/>new.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>oldi<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><ref refid="class_f_c_o_o_r_d" kindref="compound">FCOORD</ref><sp/>x_step(rotation);</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/>x_step<sp/>*=<sp/><ref refid="classtesseract_1_1_grid_base_1afff2cee730084711205977b5fcb4901e" kindref="member">gridsize</ref>();</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>oldy<sp/>=<sp/>0;<sp/>oldy<sp/>&lt;<sp/>old_height;<sp/>++oldy)<sp/>{</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_f_c_o_o_r_d" kindref="compound">FCOORD</ref><sp/>line_pos(old_bleft.x(),<sp/>old_bleft.y()<sp/>+<sp/><ref refid="classtesseract_1_1_grid_base_1afff2cee730084711205977b5fcb4901e" kindref="member">gridsize</ref>()<sp/>*<sp/>oldy);</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/>line_pos.<ref refid="class_f_c_o_o_r_d_1a81ca9ea0cac4cd8c1bca0314e29bb28d" kindref="member">rotate</ref>(rotation);</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>oldx<sp/>=<sp/>0;<sp/>oldx<sp/>&lt;<sp/>old_width;<sp/>++oldx,<sp/>line_pos<sp/>+=<sp/>x_step,<sp/>++oldi)<sp/>{</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_x,<sp/>grid_y;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a9cb158bba184d657c51257b98eea9f8f" kindref="member">GridCoords</ref>(static_cast&lt;int&gt;(line_pos.x()<sp/>+<sp/>0.5),</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="keywordtype">int</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(line_pos.y()<sp/>+<sp/>0.5),</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;grid_x,<sp/>&amp;grid_y);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>grid_[grid_y<sp/>*<sp/><ref refid="classtesseract_1_1_grid_base_1a0a38ea995b9d65f8b67d66d5501a5b80" kindref="member">gridwidth</ref>()<sp/>+<sp/>grid_x]<sp/>=<sp/>old_grid[oldi];</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>[]<sp/>old_grid;</highlight></codeline>
<codeline lineno="130"><highlight class="normal">}</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Returns<sp/>a<sp/>new<sp/>IntGrid<sp/>containing<sp/>values<sp/>equal<sp/>to<sp/>the<sp/>sum<sp/>of<sp/>all<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight><highlight class="comment">//<sp/>neighbouring<sp/>cells.<sp/>The<sp/>returned<sp/>grid<sp/>must<sp/>be<sp/>deleted<sp/>after<sp/>use.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight><highlight class="comment">//<sp/>For<sp/>ease<sp/>of<sp/>implementation,<sp/>edge<sp/>cells<sp/>are<sp/>double<sp/>counted,<sp/>to<sp/>make<sp/>them</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight><highlight class="comment">//<sp/>have<sp/>the<sp/>same<sp/>range<sp/>as<sp/>the<sp/>non-edge<sp/>cells.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal">IntGrid*<sp/><ref refid="classtesseract_1_1_int_grid_1a2412b6a04f710d91a050d8f92d3e3c25" kindref="member">IntGrid::NeighbourhoodSum</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_int_grid_1ad035d5cf48ebae7e0befe040cd5581ff" kindref="member">IntGrid</ref>*<sp/>sumgrid<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_int_grid_1ad035d5cf48ebae7e0befe040cd5581ff" kindref="member">IntGrid</ref>(<ref refid="classtesseract_1_1_grid_base_1afff2cee730084711205977b5fcb4901e" kindref="member">gridsize</ref>(),<sp/><ref refid="classtesseract_1_1_grid_base_1ad20b2cb8eb2bf52871d5260c04949cce" kindref="member">bleft</ref>(),<sp/><ref refid="classtesseract_1_1_grid_base_1aa94e147841b6a4fae0b28e7e872685a5" kindref="member">tright</ref>());</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/>0;<sp/>y<sp/>&lt;<sp/><ref refid="classtesseract_1_1_grid_base_1a07e6b230c150180d009ef1f317e642f2" kindref="member">gridheight</ref>();<sp/>++y)<sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x<sp/>=<sp/>0;<sp/>x<sp/>&lt;<sp/><ref refid="classtesseract_1_1_grid_base_1a0a38ea995b9d65f8b67d66d5501a5b80" kindref="member">gridwidth</ref>();<sp/>++x)<sp/>{</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>cell_count<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>yoffset<sp/>=<sp/>-1;<sp/>yoffset<sp/>&lt;=<sp/>1;<sp/>++yoffset)<sp/>{</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>xoffset<sp/>=<sp/>-1;<sp/>xoffset<sp/>&lt;=<sp/>1;<sp/>++xoffset)<sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_x<sp/>=<sp/>x<sp/>+<sp/>xoffset;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_y<sp/>=<sp/>y<sp/>+<sp/>yoffset;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a6349387c9d98fae34cf247b12cdc5a00" kindref="member">ClipGridCoords</ref>(&amp;grid_x,<sp/>&amp;grid_y);</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cell_count<sp/>+=<sp/><ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(grid_x,<sp/>grid_y);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(x,<sp/>y)<sp/>&gt;<sp/>1)</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sumgrid-&gt;SetGridCell(x,<sp/>y,<sp/>cell_count);</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>sumgrid;</highlight></codeline>
<codeline lineno="154"><highlight class="normal">}</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Returns<sp/>true<sp/>if<sp/>more<sp/>than<sp/>half<sp/>the<sp/>area<sp/>of<sp/>the<sp/>rect<sp/>is<sp/>covered<sp/>by<sp/>grid</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight><highlight class="comment">//<sp/>cells<sp/>that<sp/>are<sp/>over<sp/>the<sp/>theshold.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_int_grid_1af48643ce60c1d55c1ddc7cc42d84cc79" kindref="member">IntGrid::RectMostlyOverThreshold</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref>&amp;<sp/>rect,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>threshold)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>min_x,<sp/>min_y,<sp/>max_x,<sp/>max_y;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a9cb158bba184d657c51257b98eea9f8f" kindref="member">GridCoords</ref>(rect.<ref refid="class_t_b_o_x_1a724fabf566586b663577dfa944ffbc61" kindref="member">left</ref>(),<sp/>rect.<ref refid="class_t_b_o_x_1a4451d237f1cd18c4982d63fe36a11fc3" kindref="member">bottom</ref>(),<sp/>&amp;min_x,<sp/>&amp;min_y);</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a9cb158bba184d657c51257b98eea9f8f" kindref="member">GridCoords</ref>(rect.<ref refid="class_t_b_o_x_1a8703081c1a1c26db3a4dddaca1028e34" kindref="member">right</ref>(),<sp/>rect.<ref refid="class_t_b_o_x_1adf92e9fdac1bdf11c10d1c4d1178791a" kindref="member">top</ref>(),<sp/>&amp;max_x,<sp/>&amp;max_y);</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>total_area<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/>min_y;<sp/>y<sp/>&lt;=<sp/>max_y;<sp/>++y)<sp/>{</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x<sp/>=<sp/>min_x;<sp/>x<sp/>&lt;=<sp/>max_x;<sp/>++x)<sp/>{</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>value<sp/>=<sp/><ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(x,<sp/>y);</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(value<sp/>&gt;<sp/>threshold)<sp/>{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>cell_box(x<sp/>*<sp/><ref refid="classtesseract_1_1_grid_base_1a0758dd90d5ce47e504a4148f4cda33f3" kindref="member">gridsize_</ref>,<sp/>y<sp/>*<sp/>gridsize_,</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(x<sp/>+<sp/>1)<sp/>*<sp/>gridsize_,<sp/>(y<sp/>+<sp/>1)<sp/>*<sp/>gridsize_);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cell_box<sp/>&amp;=<sp/>rect;<sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>is<sp/>in-place<sp/>box<sp/>intersection.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total_area<sp/>+=<sp/>cell_box.<ref refid="class_t_b_o_x_1a46fca3df91dc271b30b69531e9d8178a" kindref="member">area</ref>();</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>total_area<sp/>*<sp/>2<sp/>&gt;<sp/>rect.<ref refid="class_t_b_o_x_1a46fca3df91dc271b30b69531e9d8178a" kindref="member">area</ref>();</highlight></codeline>
<codeline lineno="175"><highlight class="normal">}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Returns<sp/>true<sp/>if<sp/>any<sp/>cell<sp/>value<sp/>in<sp/>the<sp/>given<sp/>rectangle<sp/>is<sp/>zero.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classtesseract_1_1_int_grid_1aa73c52b6333d511c72d77fb167b799f1" kindref="member">IntGrid::AnyZeroInRect</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref>&amp;<sp/>rect)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>min_x,<sp/>min_y,<sp/>max_x,<sp/>max_y;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a9cb158bba184d657c51257b98eea9f8f" kindref="member">GridCoords</ref>(rect.<ref refid="class_t_b_o_x_1a724fabf566586b663577dfa944ffbc61" kindref="member">left</ref>(),<sp/>rect.<ref refid="class_t_b_o_x_1a4451d237f1cd18c4982d63fe36a11fc3" kindref="member">bottom</ref>(),<sp/>&amp;min_x,<sp/>&amp;min_y);</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1a9cb158bba184d657c51257b98eea9f8f" kindref="member">GridCoords</ref>(rect.<ref refid="class_t_b_o_x_1a8703081c1a1c26db3a4dddaca1028e34" kindref="member">right</ref>(),<sp/>rect.<ref refid="class_t_b_o_x_1adf92e9fdac1bdf11c10d1c4d1178791a" kindref="member">top</ref>(),<sp/>&amp;max_x,<sp/>&amp;max_y);</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/>min_y;<sp/>y<sp/>&lt;=<sp/>max_y;<sp/>++y)<sp/>{</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x<sp/>=<sp/>min_x;<sp/>x<sp/>&lt;=<sp/>max_x;<sp/>++x)<sp/>{</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(x,<sp/>y)<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="189"><highlight class="normal">}</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Returns<sp/>a<sp/>full-resolution<sp/>binary<sp/>pix<sp/>in<sp/>which<sp/>each<sp/>cell<sp/>over<sp/>the<sp/>given</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight><highlight class="comment">//<sp/>threshold<sp/>is<sp/>filled<sp/>as<sp/>a<sp/>black<sp/>square.<sp/>pixDestroy<sp/>after<sp/>use.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Edge<sp/>cells,<sp/>which<sp/>have<sp/>a<sp/>zero<sp/>4-neighbour,<sp/>are<sp/>not<sp/>marked.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal">Pix*<sp/><ref refid="classtesseract_1_1_int_grid_1a576f01a677601b22dbc56c47267a8ee7" kindref="member">IntGrid::ThresholdToPix</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>threshold)</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/>Pix*<sp/>pix<sp/>=<sp/>pixCreate(<ref refid="classtesseract_1_1_grid_base_1aa94e147841b6a4fae0b28e7e872685a5" kindref="member">tright</ref>().x()<sp/>-<sp/><ref refid="classtesseract_1_1_grid_base_1ad20b2cb8eb2bf52871d5260c04949cce" kindref="member">bleft</ref>().x(),</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_grid_base_1aa94e147841b6a4fae0b28e7e872685a5" kindref="member">tright</ref>().y()<sp/>-<sp/><ref refid="classtesseract_1_1_grid_base_1ad20b2cb8eb2bf52871d5260c04949cce" kindref="member">bleft</ref>().y(),<sp/>1);</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>cellsize<sp/>=<sp/><ref refid="classtesseract_1_1_grid_base_1afff2cee730084711205977b5fcb4901e" kindref="member">gridsize</ref>();</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y<sp/>=<sp/>0;<sp/>y<sp/>&lt;<sp/><ref refid="classtesseract_1_1_grid_base_1a07e6b230c150180d009ef1f317e642f2" kindref="member">gridheight</ref>();<sp/>++y)<sp/>{</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x<sp/>=<sp/>0;<sp/>x<sp/>&lt;<sp/><ref refid="classtesseract_1_1_grid_base_1a0a38ea995b9d65f8b67d66d5501a5b80" kindref="member">gridwidth</ref>();<sp/>++x)<sp/>{</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(x,<sp/>y)<sp/>&gt;<sp/>threshold<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(x<sp/>-<sp/>1,<sp/>y)<sp/>&gt;<sp/>0<sp/>&amp;&amp;<sp/><ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(x<sp/>+<sp/>1,<sp/>y)<sp/>&gt;<sp/>0<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(x,<sp/>y<sp/>-<sp/>1)<sp/>&gt;<sp/>0<sp/>&amp;&amp;<sp/><ref refid="classtesseract_1_1_int_grid_1a993a05924433985cb3084e691679bb84" kindref="member">GridCellValue</ref>(x,<sp/>y<sp/>+<sp/>1)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pixRasterop(pix,<sp/>x<sp/>*<sp/>cellsize,<sp/><ref refid="classtesseract_1_1_grid_base_1aa94e147841b6a4fae0b28e7e872685a5" kindref="member">tright</ref>().y()<sp/>-<sp/>((y<sp/>+<sp/>1)<sp/>*<sp/>cellsize),</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cellsize,<sp/>cellsize,<sp/>PIX_SET,<sp/><ref refid="host_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4" kindref="member">NULL</ref>,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pix;</highlight></codeline>
<codeline lineno="209"><highlight class="normal">}</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Make<sp/>a<sp/>Pix<sp/>of<sp/>the<sp/>correct<sp/>scaled<sp/>size<sp/>for<sp/>the<sp/>TraceOutline<sp/>functions.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal">Pix*<sp/><ref refid="namespacetesseract_1a4b8ee8e8f4bb2a493ce4128db3bd9bd9" kindref="member">GridReducedPix</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref>&amp;<sp/>box,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>gridsize,</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>bleft,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>left,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>bottom)<sp/>{</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Compute<sp/>grid<sp/>bounds<sp/>of<sp/>the<sp/>outline<sp/>and<sp/>pad<sp/>all<sp/>round<sp/>by<sp/>1.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_left<sp/>=<sp/>(box.<ref refid="class_t_b_o_x_1a724fabf566586b663577dfa944ffbc61" kindref="member">left</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>())<sp/>/<sp/>gridsize<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_bottom<sp/>=<sp/>(box.<ref refid="class_t_b_o_x_1a4451d237f1cd18c4982d63fe36a11fc3" kindref="member">bottom</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>/<sp/>gridsize<sp/>-<sp/>1;</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_right<sp/>=<sp/>(box.<ref refid="class_t_b_o_x_1a8703081c1a1c26db3a4dddaca1028e34" kindref="member">right</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>())<sp/>/<sp/>gridsize<sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_top<sp/>=<sp/>(box.<ref refid="class_t_b_o_x_1adf92e9fdac1bdf11c10d1c4d1178791a" kindref="member">top</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>/<sp/>gridsize<sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/>*left<sp/>=<sp/>grid_left;</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/>*bottom<sp/>=<sp/>grid_bottom;</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pixCreate(grid_right<sp/>-<sp/>grid_left<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>grid_top<sp/>-<sp/>grid_bottom<sp/>+<sp/>1,</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1);</highlight></codeline>
<codeline lineno="224"><highlight class="normal">}</highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Helper<sp/>function<sp/>to<sp/>return<sp/>a<sp/>scaled<sp/>Pix<sp/>with<sp/>one<sp/>pixel<sp/>per<sp/>grid<sp/>cell,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight><highlight class="comment">//<sp/>set<sp/>(black)<sp/>where<sp/>the<sp/>given<sp/>outline<sp/>enters<sp/>the<sp/>corresponding<sp/>grid<sp/>cell,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight><highlight class="comment">//<sp/>and<sp/>clear<sp/>where<sp/>the<sp/>outline<sp/>does<sp/>not<sp/>touch<sp/>the<sp/>grid<sp/>cell.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Also<sp/>returns<sp/>the<sp/>grid<sp/>coords<sp/>of<sp/>the<sp/>bottom-left<sp/>of<sp/>the<sp/>Pix,<sp/>in<sp/>*left</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight><highlight class="comment">//<sp/>and<sp/>*bottom,<sp/>which<sp/>corresponds<sp/>to<sp/>(0,<sp/>0)<sp/>on<sp/>the<sp/>Pix.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Note<sp/>that<sp/>the<sp/>Pix<sp/>is<sp/>used<sp/>upside-down,<sp/>with<sp/>(0,<sp/>0)<sp/>being<sp/>the<sp/>bottom-left.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal">Pix*<sp/><ref refid="namespacetesseract_1a904ab4d9c9e49e83c5d3800d57d433cb" kindref="member">TraceOutlineOnReducedPix</ref>(<ref refid="class_c___o_u_t_l_i_n_e" kindref="compound">C_OUTLINE</ref>*<sp/>outline,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>gridsize,</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>bleft,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>left,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>bottom)<sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>box<sp/>=<sp/>outline-&gt;<ref refid="class_c___o_u_t_l_i_n_e_1a6481db8e9c00281f20f45df48d499679" kindref="member">bounding_box</ref>();</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/>Pix*<sp/>pix<sp/>=<sp/><ref refid="namespacetesseract_1a4b8ee8e8f4bb2a493ce4128db3bd9bd9" kindref="member">GridReducedPix</ref>(box,<sp/>gridsize,<sp/>bleft,<sp/>left,<sp/>bottom);</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>wpl<sp/>=<sp/>pixGetWpl(pix);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/>l_uint32*<sp/>data<sp/>=<sp/>pixGetData(pix);</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>length<sp/>=<sp/>outline-&gt;<ref refid="class_c___o_u_t_l_i_n_e_1afb87d87d3d48e964937b068f55f3ca3a" kindref="member">pathlength</ref>();</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>pos<sp/>=<sp/>outline-&gt;<ref refid="class_c___o_u_t_l_i_n_e_1a0f9fef7d74691bbcf45faa2272600500" kindref="member">start_pos</ref>();</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>length;<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_x<sp/>=<sp/>(pos.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>())<sp/>/<sp/>gridsize<sp/>-<sp/>*left;</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_y<sp/>=<sp/>(pos.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>/<sp/>gridsize<sp/>-<sp/>*bottom;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>SET_DATA_BIT(data<sp/>+<sp/>grid_y<sp/>*<sp/>wpl,<sp/>grid_x);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>outline-&gt;<ref refid="class_c___o_u_t_l_i_n_e_1af6831ec849fb5ab1f2b49517fbbd5f85" kindref="member">step</ref>(i);</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pix;</highlight></codeline>
<codeline lineno="247"><highlight class="normal">}</highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0<sp/><sp/>//<sp/>Example<sp/>code<sp/>shows<sp/>how<sp/>to<sp/>use<sp/>TraceOutlineOnReducedPix.</highlight></codeline>
<codeline lineno="249"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/>C_OUTLINE_IT<sp/>ol_it(blob-&gt;cblob()-&gt;out_list());</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_left,<sp/>grid_bottom;</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/>Pix*<sp/>pix<sp/>=<sp/><ref refid="namespacetesseract_1a904ab4d9c9e49e83c5d3800d57d433cb" kindref="member">TraceOutlineOnReducedPix</ref>(ol_it.data(),<sp/>gridsize_,<sp/>bleft_,</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;grid_left,<sp/>&amp;grid_bottom);</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/>grid-&gt;InsertPixPtBBox(grid_left,<sp/>grid_bottom,<sp/>pix,<sp/>blob);</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/>pixDestroy(&amp;pix);</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="256"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight><highlight class="comment">//<sp/>As<sp/>TraceOutlineOnReducedPix<sp/>above,<sp/>but<sp/>on<sp/>a<sp/>BLOCK<sp/>instead<sp/>of<sp/>a<sp/>C_OUTLINE.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal">Pix*<sp/><ref refid="namespacetesseract_1a6cee1dea0a3fdece76728ad65ab48563" kindref="member">TraceBlockOnReducedPix</ref>(<ref refid="class_b_l_o_c_k" kindref="compound">BLOCK</ref>*<sp/>block,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>gridsize,</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>bleft,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>left,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>bottom)<sp/>{</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><ref refid="class_t_b_o_x" kindref="compound">TBOX</ref><sp/>box<sp/>=<sp/>block-&gt;<ref refid="class_p_d_b_l_k_1a91950a96127b4a0bb9b237e1f5f889a4" kindref="member" tooltip="get box ">bounding_box</ref>();</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/>Pix*<sp/>pix<sp/>=<sp/><ref refid="namespacetesseract_1a4b8ee8e8f4bb2a493ce4128db3bd9bd9" kindref="member">GridReducedPix</ref>(box,<sp/>gridsize,<sp/>bleft,<sp/>left,<sp/>bottom);</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>wpl<sp/>=<sp/>pixGetWpl(pix);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/>l_uint32*<sp/>data<sp/>=<sp/>pixGetData(pix);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/>ICOORDELT_IT<sp/>it(block-&gt;<ref refid="class_p_d_b_l_k_1a6670779c69aca2d574e4a0590d9b3939" kindref="member">poly_block</ref>()-&gt;<ref refid="class_p_o_l_y___b_l_o_c_k_1a0835a8ea39e763d6a229603d5532c879" kindref="member">points</ref>());</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(it.mark_cycle_pt();<sp/>!it.cycled_list();)<sp/>{</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>pos<sp/>=<sp/>*it.data();</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/>it.forward();</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>next_pos<sp/>=<sp/>*it.data();</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>line_vector<sp/>=<sp/>next_pos<sp/>-<sp/>pos;</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>major,<sp/>minor;</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_i_c_o_o_r_d" kindref="compound" tooltip="integer coordinate ">ICOORD</ref><sp/>major_step,<sp/>minor_step;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/>line_vector.<ref refid="class_i_c_o_o_r_d_1a5e71450225ed82a910bdec74a95a2c6d" kindref="member">setup_render</ref>(&amp;major_step,<sp/>&amp;minor_step,<sp/>&amp;major,<sp/>&amp;minor);</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>accumulator<sp/>=<sp/>major<sp/>/<sp/>2;</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(pos<sp/>!=<sp/>next_pos)<sp/>{</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_x<sp/>=<sp/>(pos.x()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a59722a47c540007c58a539f0e35b3f33" kindref="member" tooltip="access function ">x</ref>())<sp/>/<sp/>gridsize<sp/>-<sp/>*left;</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>grid_y<sp/>=<sp/>(pos.y()<sp/>-<sp/>bleft.<ref refid="class_i_c_o_o_r_d_1a66bba6ff8a5f060775e1c2ca511f7f29" kindref="member" tooltip="access_function ">y</ref>())<sp/>/<sp/>gridsize<sp/>-<sp/>*bottom;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>SET_DATA_BIT(data<sp/>+<sp/>grid_y<sp/>*<sp/>wpl,<sp/>grid_x);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>major_step;</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>accumulator<sp/>+=<sp/>minor;</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(accumulator<sp/>&gt;=<sp/>major)<sp/>{</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>accumulator<sp/>-=<sp/>major;</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pos<sp/>+=<sp/>minor_step;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pix;</highlight></codeline>
<codeline lineno="287"><highlight class="normal">}</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal">}<sp/><sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>tesseract.</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/Users/makoto/Desktop/trunk/textord/bbgrid.cpp"/>
  </compounddef>
</doxygen>
